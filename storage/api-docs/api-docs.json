{
    "openapi": "3.0.0",
    "info": {
        "title": "Helpdesk API - REST",
        "description": "API REST del Sistema Helpdesk. Migración de GraphQL a REST con autenticación JWT.",
        "contact": {
            "name": "API Support",
            "email": "support@helpdesk.local"
        },
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "http://localhost:8000",
            "description": "Development Server"
        }
    ],
    "paths": {
        "/api/auth/register": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Register a new user",
                "description": "Create a new user account and return authentication tokens",
                "operationId": "021e877864f2b053f14af19f4fce5dd7",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "password",
                                    "passwordConfirmation",
                                    "firstName",
                                    "lastName",
                                    "acceptsTerms",
                                    "acceptsPrivacyPolicy"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "minLength": 8
                                    },
                                    "passwordConfirmation": {
                                        "type": "string",
                                        "format": "password"
                                    },
                                    "firstName": {
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "lastName": {
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "acceptsTerms": {
                                        "type": "boolean"
                                    },
                                    "acceptsPrivacyPolicy": {
                                        "type": "boolean"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "User created successfully"
                    },
                    "422": {
                        "description": "Validation error"
                    },
                    "409": {
                        "description": "Email already exists"
                    }
                }
            }
        },
        "/api/auth/login": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Login user",
                "description": "Authenticate user with email and password",
                "operationId": "7571e1edb2e53d940f2029c7829e720d",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "password"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password"
                                    },
                                    "deviceName": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "rememberMe": {
                                        "type": "boolean",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Login successful"
                    },
                    "422": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Invalid credentials"
                    }
                }
            }
        },
        "/api/auth/login/google": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Login with Google",
                "description": "Authenticate user using Google ID token",
                "operationId": "09fd714107f3ee9528c85d31498e16ab",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "googleToken"
                                ],
                                "properties": {
                                    "googleToken": {
                                        "description": "Google ID token",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Login successful"
                    },
                    "422": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Invalid token"
                    }
                }
            }
        },
        "/api/auth/status": {
            "get": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Get authentication status",
                "description": "Get current authenticated user status and session information",
                "operationId": "8a24b7b2f49b7e0cb087a5b10704059b",
                "responses": {
                    "200": {
                        "description": "Authentication status retrieved"
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/email/verify": {
            "post": {
                "tags": [
                    "Email Verification"
                ],
                "summary": "Verify email",
                "description": "Verify user email with token. Always returns 200.",
                "operationId": "077140d57b4d70ffd89a68e5a5899364",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "token"
                                ],
                                "properties": {
                                    "token": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Verification result (check success field)"
                    }
                }
            }
        },
        "/api/auth/email/verify/resend": {
            "post": {
                "tags": [
                    "Email Verification"
                ],
                "summary": "Resend verification email",
                "description": "Resend verification email to authenticated user (rate limited: 3 per 5 minutes)",
                "operationId": "68696da7a70f3e6377685eab5496aa04",
                "responses": {
                    "200": {
                        "description": "Email resent"
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    }
                }
            }
        },
        "/api/auth/email/status": {
            "get": {
                "tags": [
                    "Email Verification"
                ],
                "summary": "Get email verification status",
                "description": "Get email verification status for authenticated user",
                "operationId": "f9d76d9ffd5f5b4d7f72eee0ba75f695",
                "responses": {
                    "200": {
                        "description": "Status retrieved"
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                }
            }
        },
        "/api/health": {
            "get": {
                "tags": [
                    "Health"
                ],
                "summary": "Health check",
                "description": "Verifica el estado de la API",
                "operationId": "1c4061d7fcb253d4c29c0060f524b139",
                "responses": {
                    "200": {
                        "description": "API está funcionando"
                    }
                }
            }
        },
        "/api/auth/onboarding/completed": {
            "post": {
                "tags": [
                    "Onboarding"
                ],
                "summary": "Mark onboarding as completed",
                "description": "Mark onboarding process as completed for authenticated user",
                "operationId": "d7efab01fa98353947198030b8eb5e4d",
                "responses": {
                    "200": {
                        "description": "Onboarding marked as completed"
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                }
            }
        },
        "/api/auth/password-reset": {
            "post": {
                "tags": [
                    "Password Reset"
                ],
                "summary": "Request password reset",
                "description": "Request a password reset. Always returns success for security.",
                "operationId": "67699b55b6b45dc8a8f476a6a079595b",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Reset requested (always success)"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                }
            }
        },
        "/api/auth/password-reset/confirm": {
            "post": {
                "tags": [
                    "Password Reset"
                ],
                "summary": "Confirm password reset",
                "description": "Confirm password reset with new password and token/code",
                "operationId": "4f87e9e00e2080d94b31eb313af97f9c",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "password",
                                    "passwordConfirmation"
                                ],
                                "properties": {
                                    "token": {
                                        "description": "Reset token (32 chars)",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "code": {
                                        "description": "Reset code (6 digits)",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "minLength": 8
                                    },
                                    "passwordConfirmation": {
                                        "type": "string",
                                        "format": "password"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Password reset successfully"
                    },
                    "422": {
                        "description": "Validation error"
                    },
                    "404": {
                        "description": "Invalid token/code"
                    },
                    "401": {
                        "description": "Token expired"
                    }
                }
            }
        },
        "/api/auth/password-reset/status": {
            "get": {
                "tags": [
                    "Password Reset"
                ],
                "summary": "Get password reset status",
                "description": "Validate password reset token and return its status",
                "operationId": "ff2ace448696392eb45ebde2e5e43915",
                "parameters": [
                    {
                        "name": "token",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "description": "Reset token",
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Token status retrieved"
                    },
                    "404": {
                        "description": "Token not found"
                    },
                    "410": {
                        "description": "Token expired"
                    }
                }
            }
        },
        "/api/auth/refresh": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Refresh access token",
                "description": "Get a new access token using refresh token from cookie or header. For Swagger testing, use header X-Refresh-Token with the refresh token value.",
                "operationId": "3c243abb35865fca479a53debfe9abae",
                "parameters": [
                    {
                        "name": "X-Refresh-Token",
                        "in": "header",
                        "description": "Refresh token (for testing in Swagger). If not provided, uses refresh_token from HttpOnly cookie.",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "refreshToken": {
                                        "description": "Refresh token (alternative method, not recommended)",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Token refreshed successfully. New refresh token in Set-Cookie header."
                    },
                    "401": {
                        "description": "Invalid or missing refresh token"
                    }
                }
            }
        },
        "/api/auth/sessions": {
            "get": {
                "tags": [
                    "Sessions"
                ],
                "summary": "List user sessions",
                "description": "Get all active sessions for authenticated user",
                "operationId": "9c723308a97b1e896f71b03ef5541c5a",
                "responses": {
                    "200": {
                        "description": "Sessions retrieved"
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/logout": {
            "post": {
                "tags": [
                    "Sessions"
                ],
                "summary": "Logout user",
                "description": "Logout from current session or all sessions",
                "operationId": "b471d4a100ddd7d6def4d28f7f51b1e1",
                "requestBody": {
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "everywhere": {
                                        "description": "Logout from all sessions",
                                        "type": "boolean",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Logout successful"
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/sessions/{sessionId}": {
            "delete": {
                "tags": [
                    "Sessions"
                ],
                "summary": "Revoke a session",
                "description": "Revoke a specific session from another device",
                "operationId": "f80106f8794ae1d6b079027b9d102edb",
                "parameters": [
                    {
                        "name": "sessionId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Session revoked"
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "403": {
                        "description": "Not authorized"
                    },
                    "404": {
                        "description": "Session not found"
                    },
                    "409": {
                        "description": "Cannot revoke current session"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/me/profile": {
            "get": {
                "tags": [
                    "User Management - Profile"
                ],
                "summary": "Get authenticated user profile",
                "description": "Retrieve the profile information of the currently authenticated user",
                "operationId": "7ace894c7032e75246ca465f202f3929",
                "responses": {
                    "200": {
                        "description": "Profile retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "firstName": {
                                                    "type": "string"
                                                },
                                                "lastName": {
                                                    "type": "string"
                                                },
                                                "phoneNumber": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "avatarUrl": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "birthDate": {
                                                    "type": "string",
                                                    "format": "date",
                                                    "nullable": true
                                                },
                                                "bio": {
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "User Management - Profile"
                ],
                "summary": "Update authenticated user profile",
                "description": "Update profile information for the currently authenticated user",
                "operationId": "41f059ad73bac4e0c11186619c848ba5",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "firstName": {
                                        "type": "string",
                                        "maxLength": 255,
                                        "nullable": true
                                    },
                                    "lastName": {
                                        "type": "string",
                                        "maxLength": 255,
                                        "nullable": true
                                    },
                                    "phoneNumber": {
                                        "type": "string",
                                        "maxLength": 20,
                                        "nullable": true
                                    },
                                    "avatarUrl": {
                                        "type": "string",
                                        "format": "url",
                                        "maxLength": 500,
                                        "nullable": true
                                    },
                                    "birthDate": {
                                        "type": "string",
                                        "format": "date",
                                        "nullable": true
                                    },
                                    "bio": {
                                        "type": "string",
                                        "maxLength": 1000,
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Profile updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "userId": {
                                            "type": "string",
                                            "format": "uuid"
                                        },
                                        "profile": {
                                            "type": "object"
                                        },
                                        "updatedAt": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/me/preferences": {
            "patch": {
                "tags": [
                    "User Management - Profile"
                ],
                "summary": "Update authenticated user preferences",
                "description": "Update preferences for the currently authenticated user",
                "operationId": "c0c42be68319716691eb154e6fc1d984",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "language": {
                                        "type": "string",
                                        "enum": [
                                            "en",
                                            "es",
                                            "fr"
                                        ],
                                        "nullable": true
                                    },
                                    "timezone": {
                                        "type": "string",
                                        "maxLength": 50,
                                        "nullable": true
                                    },
                                    "theme": {
                                        "type": "string",
                                        "enum": [
                                            "light",
                                            "dark",
                                            "auto"
                                        ],
                                        "nullable": true
                                    },
                                    "notificationSettings": {
                                        "properties": {
                                            "emailNotifications": {
                                                "type": "boolean"
                                            },
                                            "pushNotifications": {
                                                "type": "boolean"
                                            },
                                            "smsNotifications": {
                                                "type": "boolean"
                                            }
                                        },
                                        "type": "object",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Preferences updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "userId": {
                                            "type": "string",
                                            "format": "uuid"
                                        },
                                        "preferences": {
                                            "type": "object"
                                        },
                                        "updatedAt": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/roles": {
            "get": {
                "tags": [
                    "User Management - Roles"
                ],
                "summary": "Get all available roles",
                "description": "Returns list of all available roles in the system. Only PLATFORM_ADMIN or COMPANY_ADMIN can view roles",
                "operationId": "2cae1a45f946f14b952ebb2742eb53f1",
                "responses": {
                    "200": {
                        "description": "Roles retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid"
                                                    },
                                                    "roleCode": {
                                                        "type": "string",
                                                        "enum": [
                                                            "USER",
                                                            "AGENT",
                                                            "COMPANY_ADMIN",
                                                            "PLATFORM_ADMIN"
                                                        ]
                                                    },
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "description": {
                                                        "type": "string"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/{userId}/roles": {
            "post": {
                "tags": [
                    "User Management - Roles"
                ],
                "summary": "Assign a role to a user",
                "description": "Assign a role to a user with optional company context. Only PLATFORM_ADMIN or COMPANY_ADMIN can assign roles. Returns 200 if role was reactivated, 201 if newly assigned",
                "operationId": "1b841cca0d44633bf3ede5b1b86f9bf0",
                "parameters": [
                    {
                        "name": "userId",
                        "in": "path",
                        "description": "User UUID",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "roleCode"
                                ],
                                "properties": {
                                    "roleCode": {
                                        "type": "string",
                                        "enum": [
                                            "USER",
                                            "AGENT",
                                            "COMPANY_ADMIN",
                                            "PLATFORM_ADMIN"
                                        ]
                                    },
                                    "companyId": {
                                        "description": "Required for COMPANY_ADMIN and AGENT roles",
                                        "type": "string",
                                        "format": "uuid",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Role assigned successfully (newly created)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "Role reactivated successfully (was previously inactive)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    },
                    "404": {
                        "description": "User or role not found"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/roles/{roleId}": {
            "delete": {
                "tags": [
                    "User Management - Roles"
                ],
                "summary": "Remove a role from a user",
                "description": "Deactivate a role assignment (soft delete). Only PLATFORM_ADMIN or COMPANY_ADMIN can remove roles. COMPANY_ADMIN can only remove roles from their own company",
                "operationId": "43088c5580a9020871b2ea20e4b8aae1",
                "parameters": [
                    {
                        "name": "roleId",
                        "in": "path",
                        "description": "UserRole UUID (not Role UUID)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    },
                    {
                        "name": "reason",
                        "in": "query",
                        "description": "Optional reason for removal",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Role removed successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    },
                    "404": {
                        "description": "Role not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/me": {
            "get": {
                "tags": [
                    "User Management - Users"
                ],
                "summary": "Get authenticated user information",
                "description": "Returns complete user info with profile, roles, companies, and statistics",
                "operationId": "8f47e1e61982d460c69304e30cb35386",
                "responses": {
                    "200": {
                        "description": "User information retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "userCode": {
                                                    "type": "string"
                                                },
                                                "email": {
                                                    "type": "string",
                                                    "format": "email"
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "enum": [
                                                        "active",
                                                        "suspended",
                                                        "deleted"
                                                    ]
                                                },
                                                "emailVerified": {
                                                    "type": "boolean"
                                                },
                                                "profile": {
                                                    "type": "object"
                                                },
                                                "roles": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "statistics": {
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users": {
            "get": {
                "tags": [
                    "User Management - Users"
                ],
                "summary": "List users with filters and pagination",
                "description": "Returns paginated list of users with optional filters. PLATFORM_ADMIN sees all users, COMPANY_ADMIN sees only users from their company",
                "operationId": "01dad65b59216245fd3c403a236ccacc",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Search by email, user_code, or profile name",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Filter by status",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "active",
                                "suspended",
                                "deleted"
                            ]
                        }
                    },
                    {
                        "name": "emailVerified",
                        "in": "query",
                        "description": "Filter by email verification",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "role",
                        "in": "query",
                        "description": "Filter by role",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "USER",
                                "AGENT",
                                "COMPANY_ADMIN",
                                "PLATFORM_ADMIN"
                            ]
                        }
                    },
                    {
                        "name": "companyId",
                        "in": "query",
                        "description": "Filter by company UUID",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    },
                    {
                        "name": "recentActivity",
                        "in": "query",
                        "description": "Filter users active in last 7 days",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "createdAfter",
                        "in": "query",
                        "description": "Filter users created after datetime",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "createdBefore",
                        "in": "query",
                        "description": "Filter users created before datetime",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "order_by",
                        "in": "query",
                        "description": "Order by field",
                        "schema": {
                            "type": "string",
                            "default": "created_at",
                            "enum": [
                                "created_at",
                                "updated_at",
                                "email",
                                "status",
                                "last_login_at",
                                "last_activity_at"
                            ]
                        }
                    },
                    {
                        "name": "order_direction",
                        "in": "query",
                        "description": "Order direction",
                        "schema": {
                            "type": "string",
                            "default": "desc",
                            "enum": [
                                "asc",
                                "desc"
                            ]
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number",
                        "schema": {
                            "type": "integer",
                            "default": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Items per page (max 50)",
                        "schema": {
                            "type": "integer",
                            "default": 15
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Users list retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "meta": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/{id}": {
            "get": {
                "tags": [
                    "User Management - Users"
                ],
                "summary": "Get specific user by ID",
                "description": "Returns complete user information. PLATFORM_ADMIN can view any user, COMPANY_ADMIN can view users from their company only",
                "operationId": "1be4967b9c07afac2cd321417aa701e5",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "User UUID",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    },
                    "404": {
                        "description": "User not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "User Management - Users"
                ],
                "summary": "Delete user (soft delete)",
                "description": "Soft delete a user (sets status to deleted and deleted_at timestamp). Only PLATFORM_ADMIN can perform this action. User cannot delete themselves",
                "operationId": "dbeda92c2e24b4801bf5a1e633d1061d",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "User UUID",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    },
                    {
                        "name": "reason",
                        "in": "query",
                        "description": "Optional deletion reason",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Only platform administrators can delete users"
                    },
                    "404": {
                        "description": "User not found"
                    },
                    "422": {
                        "description": "Cannot delete self"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/{id}/status": {
            "put": {
                "tags": [
                    "User Management - Users"
                ],
                "summary": "Update user status",
                "description": "Suspend or activate a user. Only PLATFORM_ADMIN can perform this action",
                "operationId": "c908ae54c8fed19a21ee137c99b48a9b",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "User UUID",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "status"
                                ],
                                "properties": {
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "active",
                                            "suspended"
                                        ]
                                    },
                                    "reason": {
                                        "description": "Required when status is suspended",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "User status updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "userId": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "status": {
                                                    "type": "string"
                                                },
                                                "updatedAt": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Only platform administrators can update user status"
                    },
                    "404": {
                        "description": "User not found"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        }
    },
    "tags": [
        {
            "name": "Authentication",
            "description": "Authentication"
        },
        {
            "name": "Email Verification",
            "description": "Email Verification"
        },
        {
            "name": "Health",
            "description": "Health"
        },
        {
            "name": "Onboarding",
            "description": "Onboarding"
        },
        {
            "name": "Password Reset",
            "description": "Password Reset"
        },
        {
            "name": "Sessions",
            "description": "Sessions"
        },
        {
            "name": "User Management - Profile",
            "description": "User Management - Profile"
        },
        {
            "name": "User Management - Roles",
            "description": "User Management - Roles"
        },
        {
            "name": "User Management - Users",
            "description": "User Management - Users"
        }
    ],
    "components": {
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "description": "JWT Bearer Token. Include in Authorization header: Bearer <token>",
                "scheme": "bearer",
                "bearerFormat": "JWT"
            }
        }
    }
}
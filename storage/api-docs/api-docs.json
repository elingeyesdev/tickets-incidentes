{
    "openapi": "3.0.0",
    "info": {
        "title": "Helpdesk API - REST",
        "description": "API REST del Sistema Helpdesk. Migración de GraphQL a REST con autenticación JWT.",
        "contact": {
            "name": "API Support",
            "email": "support@helpdesk.local"
        },
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "http://localhost:8000",
            "description": "Development Server"
        }
    ],
    "paths": {
        "/api/auth/register": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Register a new user",
                "description": "Creates a new user account with email and password authentication. Automatically generates JWT access token and refresh token. The refresh token is securely stored in an HttpOnly cookie for enhanced security. Upon successful registration, the user receives a verification email and can immediately start using the application.",
                "operationId": "021e877864f2b053f14af19f4fce5dd7",
                "requestBody": {
                    "description": "User registration data",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "password",
                                    "passwordConfirmation",
                                    "firstName",
                                    "lastName",
                                    "acceptsTerms",
                                    "acceptsPrivacyPolicy"
                                ],
                                "properties": {
                                    "email": {
                                        "description": "User email address (must be unique)",
                                        "type": "string",
                                        "format": "email",
                                        "example": "user@example.com"
                                    },
                                    "password": {
                                        "description": "Password (minimum 8 characters, must contain letters, numbers, and symbols)",
                                        "type": "string",
                                        "format": "password",
                                        "minLength": 8,
                                        "example": "SecurePass123!"
                                    },
                                    "passwordConfirmation": {
                                        "description": "Password confirmation (must match password field)",
                                        "type": "string",
                                        "format": "password",
                                        "minLength": 8,
                                        "example": "SecurePass123!"
                                    },
                                    "firstName": {
                                        "description": "User first name",
                                        "type": "string",
                                        "maxLength": 255,
                                        "minLength": 2,
                                        "example": "Juan"
                                    },
                                    "lastName": {
                                        "description": "User last name",
                                        "type": "string",
                                        "maxLength": 255,
                                        "minLength": 2,
                                        "example": "Pérez"
                                    },
                                    "acceptsTerms": {
                                        "description": "User must accept terms of service (must be true)",
                                        "type": "boolean",
                                        "example": true
                                    },
                                    "acceptsPrivacyPolicy": {
                                        "description": "User must accept privacy policy (must be true)",
                                        "type": "boolean",
                                        "example": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "User created successfully. Returns authentication tokens and user data. Refresh token is set in HttpOnly cookie named \"refresh_token\".",
                        "headers": {
                            "Set-Cookie": {
                                "description": "HttpOnly cookie containing refresh token (name: refresh_token, path: /, httpOnly: true, sameSite: lax, maxAge: 43200 minutes)",
                                "schema": {
                                    "type": "string",
                                    "example": "refresh_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...; Path=/; HttpOnly; SameSite=Lax; Max-Age=2592000"
                                }
                            }
                        },
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "accessToken": {
                                            "description": "JWT access token for API authentication",
                                            "type": "string",
                                            "example": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
                                        },
                                        "refreshToken": {
                                            "description": "Information message (actual token is in HttpOnly cookie)",
                                            "type": "string",
                                            "example": "Refresh token set in httpOnly cookie"
                                        },
                                        "tokenType": {
                                            "description": "Token type",
                                            "type": "string",
                                            "example": "Bearer"
                                        },
                                        "expiresIn": {
                                            "description": "Access token expiration time in seconds",
                                            "type": "integer",
                                            "example": 2592000
                                        },
                                        "user": {
                                            "description": "Authenticated user information",
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "550e8400-e29b-41d4-a716-446655440000"
                                                },
                                                "userCode": {
                                                    "type": "string",
                                                    "example": "USR-20241101-001"
                                                },
                                                "email": {
                                                    "type": "string",
                                                    "format": "email",
                                                    "example": "user@example.com"
                                                },
                                                "emailVerified": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "onboardingCompleted": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "enum": [
                                                        "ACTIVE",
                                                        "INACTIVE",
                                                        "SUSPENDED"
                                                    ],
                                                    "example": "ACTIVE"
                                                },
                                                "displayName": {
                                                    "type": "string",
                                                    "example": "Juan Pérez"
                                                },
                                                "avatarUrl": {
                                                    "type": "string",
                                                    "example": null,
                                                    "nullable": true
                                                },
                                                "theme": {
                                                    "type": "string",
                                                    "enum": [
                                                        "light",
                                                        "dark"
                                                    ],
                                                    "example": "light"
                                                },
                                                "language": {
                                                    "type": "string",
                                                    "example": "es"
                                                },
                                                "roleContexts": {
                                                    "description": "User roles and their associated contexts",
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "roleCode": {
                                                                "type": "string",
                                                                "enum": [
                                                                    "USER",
                                                                    "AGENT",
                                                                    "COMPANY_ADMIN",
                                                                    "PLATFORM_ADMIN"
                                                                ],
                                                                "example": "USER"
                                                            },
                                                            "roleName": {
                                                                "type": "string",
                                                                "example": "Cliente"
                                                            },
                                                            "dashboardPath": {
                                                                "type": "string",
                                                                "example": "/tickets"
                                                            },
                                                            "company": {
                                                                "properties": {
                                                                    "id": {
                                                                        "type": "string",
                                                                        "format": "uuid"
                                                                    },
                                                                    "companyCode": {
                                                                        "type": "string"
                                                                    },
                                                                    "name": {
                                                                        "type": "string"
                                                                    }
                                                                },
                                                                "type": "object",
                                                                "nullable": true
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "sessionId": {
                                            "description": "Session identifier",
                                            "type": "string",
                                            "format": "uuid",
                                            "example": "660e8400-e29b-41d4-a716-446655440011"
                                        },
                                        "loginTimestamp": {
                                            "description": "ISO 8601 timestamp",
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2024-11-01T10:30:00+00:00"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error - Invalid input data",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The email field is required. (and 2 more errors)"
                                        },
                                        "errors": {
                                            "description": "Field-specific validation errors",
                                            "type": "object",
                                            "example": {
                                                "email": [
                                                    "El email es requerido."
                                                ],
                                                "password": [
                                                    "La contraseña debe tener al menos 8 caracteres."
                                                ],
                                                "acceptsTerms": [
                                                    "Debes aceptar los términos de servicio."
                                                ]
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Conflict - Email already registered",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Este email ya está registrado."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "example": {
                                                "email": [
                                                    "Este email ya está registrado."
                                                ]
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/auth/login": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Login user",
                "description": "Authenticates a user using email and password credentials. Generates a new JWT access token and refresh token for the session. The refresh token is securely stored in an HttpOnly cookie. Device information is automatically captured from the request headers for session tracking.",
                "operationId": "7571e1edb2e53d940f2029c7829e720d",
                "requestBody": {
                    "description": "Login credentials",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "password"
                                ],
                                "properties": {
                                    "email": {
                                        "description": "User email address (case-insensitive)",
                                        "type": "string",
                                        "format": "email",
                                        "example": "lukqs05@gmail.com"
                                    },
                                    "password": {
                                        "description": "User password",
                                        "type": "string",
                                        "format": "password",
                                        "minLength": 8,
                                        "example": "mklmklmkl"
                                    },
                                    "deviceName": {
                                        "description": "Optional custom device name (auto-detected if not provided)",
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "fifon 15",
                                        "nullable": true
                                    },
                                    "rememberMe": {
                                        "description": "Keep session active for longer (currently not implemented)",
                                        "type": "boolean",
                                        "example": true,
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Login successful. Returns authentication tokens and user data. Refresh token is set in HttpOnly cookie named \"refresh_token\".",
                        "headers": {
                            "Set-Cookie": {
                                "description": "HttpOnly cookie containing refresh token (name: refresh_token, path: /, httpOnly: true, sameSite: lax, maxAge: 43200 minutes)",
                                "schema": {
                                    "type": "string",
                                    "example": "refresh_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...; Path=/; HttpOnly; SameSite=Lax; Max-Age=2592000"
                                }
                            }
                        },
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "accessToken": {
                                            "description": "JWT access token for API authentication",
                                            "type": "string",
                                            "example": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
                                        },
                                        "refreshToken": {
                                            "description": "Information message (actual token is in HttpOnly cookie)",
                                            "type": "string",
                                            "example": "Refresh token set in httpOnly cookie"
                                        },
                                        "tokenType": {
                                            "description": "Token type",
                                            "type": "string",
                                            "example": "Bearer"
                                        },
                                        "expiresIn": {
                                            "description": "Access token expiration time in seconds",
                                            "type": "integer",
                                            "example": 2592000
                                        },
                                        "user": {
                                            "description": "Authenticated user information",
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "550e8400-e29b-41d4-a716-446655440000"
                                                },
                                                "userCode": {
                                                    "type": "string",
                                                    "example": "USR-20241101-001"
                                                },
                                                "email": {
                                                    "type": "string",
                                                    "format": "email",
                                                    "example": "user@example.com"
                                                },
                                                "emailVerified": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "onboardingCompleted": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "enum": [
                                                        "ACTIVE",
                                                        "INACTIVE",
                                                        "SUSPENDED"
                                                    ],
                                                    "example": "ACTIVE"
                                                },
                                                "displayName": {
                                                    "type": "string",
                                                    "example": "Juan Pérez"
                                                },
                                                "avatarUrl": {
                                                    "type": "string",
                                                    "example": "https://example.com/avatars/user.jpg",
                                                    "nullable": true
                                                },
                                                "theme": {
                                                    "type": "string",
                                                    "enum": [
                                                        "light",
                                                        "dark"
                                                    ],
                                                    "example": "light"
                                                },
                                                "language": {
                                                    "type": "string",
                                                    "example": "es"
                                                },
                                                "roleContexts": {
                                                    "description": "User roles and their associated contexts",
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "roleCode": {
                                                                "type": "string",
                                                                "enum": [
                                                                    "USER",
                                                                    "AGENT",
                                                                    "COMPANY_ADMIN",
                                                                    "PLATFORM_ADMIN"
                                                                ],
                                                                "example": "COMPANY_ADMIN"
                                                            },
                                                            "roleName": {
                                                                "type": "string",
                                                                "example": "Administrador de Empresa"
                                                            },
                                                            "dashboardPath": {
                                                                "type": "string",
                                                                "example": "/empresa/dashboard"
                                                            },
                                                            "company": {
                                                                "properties": {
                                                                    "id": {
                                                                        "type": "string",
                                                                        "format": "uuid",
                                                                        "example": "770e8400-e29b-41d4-a716-446655440088"
                                                                    },
                                                                    "companyCode": {
                                                                        "type": "string",
                                                                        "example": "CMP-20241101-001"
                                                                    },
                                                                    "name": {
                                                                        "type": "string",
                                                                        "example": "Acme Corp"
                                                                    }
                                                                },
                                                                "type": "object",
                                                                "nullable": true
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "sessionId": {
                                            "description": "Session identifier",
                                            "type": "string",
                                            "format": "uuid",
                                            "example": "660e8400-e29b-41d4-a716-446655440011"
                                        },
                                        "loginTimestamp": {
                                            "description": "ISO 8601 timestamp",
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2024-11-01T10:30:00+00:00"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error - Invalid input data",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The email field is required."
                                        },
                                        "errors": {
                                            "description": "Field-specific validation errors",
                                            "type": "object",
                                            "example": {
                                                "email": [
                                                    "El email es requerido."
                                                ],
                                                "password": [
                                                    "La contraseña es requerida."
                                                ]
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized - Invalid credentials or user account is suspended/inactive",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Invalid credentials"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "INVALID_CREDENTIALS"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/auth/login/google": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Login with Google OAuth (NOT IMPLEMENTED)",
                "description": "Authenticate user using Google ID token. If the user does not exist, it will be automatically created. NOTE: This endpoint is currently NOT IMPLEMENTED and will return HTTP 501 (Not Implemented). It is planned for a future release.",
                "operationId": "09fd714107f3ee9528c85d31498e16ab",
                "requestBody": {
                    "description": "Google authentication token",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "googleToken"
                                ],
                                "properties": {
                                    "googleToken": {
                                        "description": "Google ID token obtained from Google OAuth flow",
                                        "type": "string",
                                        "example": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjZmNzI1NDEwMWY1NmU0M2..."
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "501": {
                        "description": "Not Implemented - This feature is not yet available",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Google login not yet implemented"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error - Invalid input data (when implemented)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The googleToken field is required."
                                        },
                                        "errors": {
                                            "description": "Field-specific validation errors",
                                            "type": "object",
                                            "example": {
                                                "googleToken": [
                                                    "The googleToken field is required."
                                                ]
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized - Invalid or expired Google token (when implemented)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Invalid Google token"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "INVALID_GOOGLE_TOKEN"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/auth/status": {
            "get": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Get authentication status",
                "description": "Retrieves the current authentication status for the authenticated user. Returns complete user information, active session details, and JWT token metadata. Requires a valid Bearer token in the Authorization header. This endpoint is useful for checking if a user session is still valid and retrieving updated user data.",
                "operationId": "8a24b7b2f49b7e0cb087a5b10704059b",
                "responses": {
                    "200": {
                        "description": "Authentication status retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "isAuthenticated": {
                                            "description": "Always true for successful responses",
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "user": {
                                            "description": "Current authenticated user information",
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "550e8400-e29b-41d4-a716-446655440000"
                                                },
                                                "userCode": {
                                                    "type": "string",
                                                    "example": "USR-20241101-001"
                                                },
                                                "email": {
                                                    "type": "string",
                                                    "format": "email",
                                                    "example": "user@example.com"
                                                },
                                                "emailVerified": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "onboardingCompleted": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "enum": [
                                                        "ACTIVE",
                                                        "INACTIVE",
                                                        "SUSPENDED"
                                                    ],
                                                    "example": "ACTIVE"
                                                },
                                                "displayName": {
                                                    "type": "string",
                                                    "example": "Juan Pérez"
                                                },
                                                "avatarUrl": {
                                                    "type": "string",
                                                    "example": "https://example.com/avatars/user.jpg",
                                                    "nullable": true
                                                },
                                                "theme": {
                                                    "type": "string",
                                                    "enum": [
                                                        "light",
                                                        "dark"
                                                    ],
                                                    "example": "light"
                                                },
                                                "language": {
                                                    "type": "string",
                                                    "example": "es"
                                                },
                                                "roleContexts": {
                                                    "description": "User roles and their associated contexts",
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "roleCode": {
                                                                "type": "string",
                                                                "enum": [
                                                                    "USER",
                                                                    "AGENT",
                                                                    "COMPANY_ADMIN",
                                                                    "PLATFORM_ADMIN"
                                                                ],
                                                                "example": "USER"
                                                            },
                                                            "roleName": {
                                                                "type": "string",
                                                                "example": "Cliente"
                                                            },
                                                            "dashboardPath": {
                                                                "type": "string",
                                                                "example": "/tickets"
                                                            },
                                                            "company": {
                                                                "properties": {
                                                                    "id": {
                                                                        "type": "string",
                                                                        "format": "uuid",
                                                                        "example": "770e8400-e29b-41d4-a716-446655440088"
                                                                    },
                                                                    "companyCode": {
                                                                        "type": "string",
                                                                        "example": "CMP-20241101-001"
                                                                    },
                                                                    "name": {
                                                                        "type": "string",
                                                                        "example": "Acme Corp"
                                                                    }
                                                                },
                                                                "type": "object",
                                                                "nullable": true
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "currentSession": {
                                            "description": "Current active session information (null if session not found)",
                                            "properties": {
                                                "sessionId": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "660e8400-e29b-41d4-a716-446655440011"
                                                },
                                                "deviceName": {
                                                    "type": "string",
                                                    "example": "Chrome on Windows"
                                                },
                                                "ipAddress": {
                                                    "type": "string",
                                                    "format": "ipv4",
                                                    "example": "192.168.1.100"
                                                },
                                                "userAgent": {
                                                    "type": "string",
                                                    "example": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36..."
                                                },
                                                "lastUsedAt": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2024-11-01T10:25:00+00:00",
                                                    "nullable": true
                                                },
                                                "expiresAt": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2024-12-01T10:30:00+00:00",
                                                    "nullable": true
                                                },
                                                "isCurrent": {
                                                    "type": "boolean",
                                                    "example": true
                                                }
                                            },
                                            "type": "object",
                                            "nullable": true
                                        },
                                        "tokenInfo": {
                                            "description": "JWT token metadata",
                                            "properties": {
                                                "expiresIn": {
                                                    "description": "Seconds until token expires",
                                                    "type": "integer",
                                                    "example": 2591000
                                                },
                                                "issuedAt": {
                                                    "description": "Token issue timestamp",
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2024-11-01T10:30:00+00:00"
                                                },
                                                "tokenType": {
                                                    "type": "string",
                                                    "example": "Bearer"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized - Invalid, expired, or missing access token",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/email/verify": {
            "post": {
                "tags": [
                    "Email Verification"
                ],
                "summary": "Verify email",
                "description": "Verify user email with token. Public endpoint (no authentication required). Always returns 200 status, check \"success\" field in response body to determine result.",
                "operationId": "077140d57b4d70ffd89a68e5a5899364",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "token"
                                ],
                                "properties": {
                                    "token": {
                                        "description": "Email verification token (received via email)",
                                        "type": "string",
                                        "example": "abc123def456ghi789jkl012mno345pq"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Verification result (always returns 200, check success field)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "¡Email verificado exitosamente! Ya puedes usar todas las funciones del sistema."
                                        },
                                        "canResend": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "resendAvailableAt": {
                                            "type": "string",
                                            "example": null,
                                            "nullable": true
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/auth/email/verify/resend": {
            "post": {
                "tags": [
                    "Email Verification"
                ],
                "summary": "Resend verification email",
                "description": "Resend verification email to authenticated user. Rate limited: 3 attempts every 5 minutes. Always returns success message for security (even if already verified).",
                "operationId": "68696da7a70f3e6377685eab5496aa04",
                "responses": {
                    "200": {
                        "description": "Email resent successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Email de verificación enviado correctamente. Revisa tu bandeja de entrada."
                                        },
                                        "canResend": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "resendAvailableAt": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-11-01T15:30:00+00:00"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "429": {
                        "description": "Rate limit exceeded (3 attempts per 5 minutes)"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/email/status": {
            "get": {
                "tags": [
                    "Email Verification"
                ],
                "summary": "Get email verification status",
                "description": "Get email verification status for authenticated user. Returns verification state, timestamps, and resend availability.",
                "operationId": "f9d76d9ffd5f5b4d7f72eee0ba75f695",
                "responses": {
                    "200": {
                        "description": "Status retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "is_verified": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "email": {
                                            "type": "string",
                                            "format": "email",
                                            "example": "user@example.com"
                                        },
                                        "verified_at": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-11-01T10:30:00+00:00",
                                            "nullable": true
                                        },
                                        "can_resend": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "resend_available_at": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-11-01T15:30:00+00:00",
                                            "nullable": true
                                        },
                                        "attempts_remaining": {
                                            "type": "integer",
                                            "example": 3
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/health": {
            "get": {
                "tags": [
                    "Health"
                ],
                "summary": "Health check",
                "description": "Verify that the API is operational and responding correctly",
                "operationId": "1c4061d7fcb253d4c29c0060f524b139",
                "responses": {
                    "200": {
                        "description": "API is operational",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "description": "Health status of the API",
                                            "type": "string",
                                            "example": "ok"
                                        },
                                        "timestamp": {
                                            "description": "ISO 8601 timestamp of the health check",
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-11-01T12:00:00+00:00"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/auth/onboarding/completed": {
            "post": {
                "tags": [
                    "Onboarding"
                ],
                "summary": "Mark onboarding as completed",
                "description": "Marks the onboarding process as completed for the authenticated user. Sets the onboarding_completed_at timestamp. If onboarding is already completed, returns success without modifications. Email verification is NOT a prerequisite for completing onboarding.",
                "operationId": "d7efab01fa98353947198030b8eb5e4d",
                "responses": {
                    "200": {
                        "description": "Onboarding successfully marked as completed",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "required": [
                                        "success",
                                        "message",
                                        "user"
                                    ],
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Onboarding completado exitosamente"
                                        },
                                        "user": {
                                            "required": [
                                                "id",
                                                "userCode",
                                                "email",
                                                "emailVerified",
                                                "onboardingCompleted",
                                                "status",
                                                "displayName"
                                            ],
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "9d5e8e42-3f1c-4e8d-a8c4-5e3f1c4e8d9a"
                                                },
                                                "userCode": {
                                                    "type": "string",
                                                    "example": "USR-20251101-001"
                                                },
                                                "email": {
                                                    "type": "string",
                                                    "format": "email",
                                                    "example": "john.doe@example.com"
                                                },
                                                "emailVerified": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "onboardingCompleted": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "enum": [
                                                        "ACTIVE",
                                                        "INACTIVE",
                                                        "SUSPENDED"
                                                    ],
                                                    "example": "ACTIVE"
                                                },
                                                "displayName": {
                                                    "type": "string",
                                                    "example": "John Doe"
                                                },
                                                "avatarUrl": {
                                                    "type": "string",
                                                    "format": "url",
                                                    "example": "https://example.com/avatars/john-doe.jpg",
                                                    "nullable": true
                                                },
                                                "theme": {
                                                    "type": "string",
                                                    "enum": [
                                                        "light",
                                                        "dark"
                                                    ],
                                                    "example": "light"
                                                },
                                                "language": {
                                                    "type": "string",
                                                    "example": "es"
                                                },
                                                "roleContexts": {
                                                    "type": "array",
                                                    "items": {
                                                        "required": [
                                                            "roleCode",
                                                            "roleName",
                                                            "dashboardPath",
                                                            "company"
                                                        ],
                                                        "properties": {
                                                            "roleCode": {
                                                                "type": "string",
                                                                "enum": [
                                                                    "USER",
                                                                    "AGENT",
                                                                    "COMPANY_ADMIN",
                                                                    "PLATFORM_ADMIN"
                                                                ],
                                                                "example": "USER"
                                                            },
                                                            "roleName": {
                                                                "type": "string",
                                                                "example": "Cliente"
                                                            },
                                                            "dashboardPath": {
                                                                "type": "string",
                                                                "example": "/tickets"
                                                            },
                                                            "company": {
                                                                "required": [
                                                                    "id",
                                                                    "companyCode",
                                                                    "name"
                                                                ],
                                                                "properties": {
                                                                    "id": {
                                                                        "type": "string",
                                                                        "format": "uuid",
                                                                        "example": "8d4e7e31-2f0b-3d7c-b9c3-4e2f0b3d7c8d"
                                                                    },
                                                                    "companyCode": {
                                                                        "type": "string",
                                                                        "example": "COMP-20251101-001"
                                                                    },
                                                                    "name": {
                                                                        "type": "string",
                                                                        "example": "Acme Corporation"
                                                                    }
                                                                },
                                                                "type": "object",
                                                                "nullable": true
                                                            }
                                                        },
                                                        "type": "object"
                                                    },
                                                    "example": [
                                                        {
                                                            "roleCode": "USER",
                                                            "roleName": "Cliente",
                                                            "dashboardPath": "/tickets",
                                                            "company": null
                                                        }
                                                    ]
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "User not authenticated - Missing or invalid bearer token",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/password-reset": {
            "post": {
                "tags": [
                    "Password Reset"
                ],
                "summary": "Request password reset",
                "description": "Request a password reset email. Public endpoint (no authentication required). ALWAYS returns 200 success for security - does not reveal if email exists in system.",
                "operationId": "67699b55b6b45dc8a8f476a6a079595b",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email"
                                ],
                                "properties": {
                                    "email": {
                                        "description": "Email address to send password reset link",
                                        "type": "string",
                                        "format": "email",
                                        "example": "user@example.com"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Reset requested successfully (always returns 200, even if email does not exist)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Si el email existe en nuestro sistema, recibirás un enlace para resetear tu contraseña."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error (invalid email format)"
                    }
                }
            }
        },
        "/api/auth/password-reset/confirm": {
            "post": {
                "tags": [
                    "Password Reset"
                ],
                "summary": "Confirm password reset",
                "description": "Confirm password reset with new password and token/code. Public endpoint (no authentication required). Automatically logs in user and returns session tokens after successful reset.",
                "operationId": "4f87e9e00e2080d94b31eb313af97f9c",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "password",
                                    "passwordConfirmation"
                                ],
                                "properties": {
                                    "token": {
                                        "description": "Reset token (32 chars) - received via email. Use token OR code, not both.",
                                        "type": "string",
                                        "example": "abc123def456ghi789jkl012mno345pq",
                                        "nullable": true
                                    },
                                    "code": {
                                        "description": "Reset code (6 digits) - alternative to token. Use token OR code, not both.",
                                        "type": "string",
                                        "example": "123456",
                                        "nullable": true
                                    },
                                    "password": {
                                        "description": "New password (minimum 8 characters)",
                                        "type": "string",
                                        "format": "password",
                                        "minLength": 8,
                                        "example": "NewSecurePass123!"
                                    },
                                    "passwordConfirmation": {
                                        "description": "Password confirmation (must match password)",
                                        "type": "string",
                                        "format": "password",
                                        "example": "NewSecurePass123!"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Password reset successfully - user automatically logged in",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "accessToken": {
                                            "type": "string",
                                            "example": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
                                        },
                                        "refreshToken": {
                                            "type": "string",
                                            "example": "def502004b4c8a1b3f7e..."
                                        },
                                        "tokenType": {
                                            "type": "string",
                                            "example": "Bearer"
                                        },
                                        "expiresIn": {
                                            "type": "integer",
                                            "example": 3600
                                        },
                                        "user": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "550e8400-e29b-41d4-a716-446655440000"
                                                },
                                                "email": {
                                                    "type": "string",
                                                    "format": "email",
                                                    "example": "user@example.com"
                                                },
                                                "userCode": {
                                                    "type": "string",
                                                    "example": "USER001"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "sessionId": {
                                            "type": "string",
                                            "format": "uuid",
                                            "example": "650e8400-e29b-41d4-a716-446655440001"
                                        },
                                        "loginTimestamp": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-11-01T15:30:00+00:00"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error (invalid format, passwords do not match, etc.)"
                    },
                    "404": {
                        "description": "Invalid token/code - not found in database"
                    },
                    "401": {
                        "description": "Token expired or already used"
                    }
                }
            }
        },
        "/api/auth/password-reset/status": {
            "get": {
                "tags": [
                    "Password Reset"
                ],
                "summary": "Get password reset status",
                "description": "Validate password reset token and return its status. Public endpoint (no authentication required). Use this before showing the password reset form to verify the token is valid.",
                "operationId": "ff2ace448696392eb45ebde2e5e43915",
                "parameters": [
                    {
                        "name": "token",
                        "in": "query",
                        "description": "Password reset token (32 chars) received via email",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "example": "abc123def456ghi789jkl012mno345pq"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Token status retrieved successfully (always returns 200, check is_valid field)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "is_valid": {
                                            "description": "Whether the token is valid and not expired",
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "can_reset": {
                                            "description": "Whether password can be reset (same as is_valid)",
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "email": {
                                            "description": "Email associated with token (null if invalid)",
                                            "type": "string",
                                            "format": "email",
                                            "example": "user@example.com",
                                            "nullable": true
                                        },
                                        "expires_at": {
                                            "description": "Token expiration timestamp",
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-11-01T16:30:00+00:00",
                                            "nullable": true
                                        },
                                        "attempts_remaining": {
                                            "description": "Number of remaining reset attempts",
                                            "type": "integer",
                                            "example": 3
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Token not found in database"
                    },
                    "410": {
                        "description": "Token expired (gone)"
                    }
                }
            }
        },
        "/api/auth/refresh": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Refresh access token",
                "description": "Generates a new JWT access token and refresh token using a valid refresh token. The refresh token is read from an HttpOnly cookie (recommended for security), or alternatively from the X-Refresh-Token header (for testing in Swagger) or request body. This endpoint implements token rotation: the old refresh token is invalidated and a new one is generated. The new refresh token is automatically set in an HttpOnly cookie.",
                "operationId": "3c243abb35865fca479a53debfe9abae",
                "parameters": [
                    {
                        "name": "X-Refresh-Token",
                        "in": "header",
                        "description": "Refresh token for testing in Swagger UI. In production, the refresh token should be sent via HttpOnly cookie (automatically handled by browsers). This header takes priority over cookie and body.",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
                        }
                    }
                ],
                "requestBody": {
                    "description": "Alternative method to send refresh token (not recommended for production)",
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "refreshToken": {
                                        "description": "Refresh token (use only if cookie and header are not available)",
                                        "type": "string",
                                        "example": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Token refreshed successfully. New access token returned in response body. New refresh token set in HttpOnly cookie.",
                        "headers": {
                            "Set-Cookie": {
                                "description": "HttpOnly cookie containing new refresh token (name: refresh_token, path: /, httpOnly: true, sameSite: strict, secure: true in production, maxAge: 43200 minutes / 30 days)",
                                "schema": {
                                    "type": "string",
                                    "example": "refresh_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...; Path=/; HttpOnly; Secure; SameSite=Strict; Max-Age=2592000"
                                }
                            }
                        },
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "accessToken": {
                                            "description": "New JWT access token for API authentication",
                                            "type": "string",
                                            "example": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
                                        },
                                        "tokenType": {
                                            "description": "Token type",
                                            "type": "string",
                                            "example": "Bearer"
                                        },
                                        "expiresIn": {
                                            "description": "Access token expiration time in seconds",
                                            "type": "integer",
                                            "example": 2592000
                                        },
                                        "message": {
                                            "description": "Success message explaining that refresh token is in cookie",
                                            "type": "string",
                                            "example": "Token refreshed successfully. New refresh token set in HttpOnly cookie."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized - Invalid, expired, or missing refresh token",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "description": "Human-readable error message",
                                            "type": "string",
                                            "example": "Invalid or expired refresh token. Please login again."
                                        },
                                        "error": {
                                            "description": "Error code for programmatic handling",
                                            "type": "string",
                                            "enum": [
                                                "REFRESH_TOKEN_REQUIRED",
                                                "INVALID_REFRESH_TOKEN"
                                            ],
                                            "example": "INVALID_REFRESH_TOKEN"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/auth/sessions": {
            "get": {
                "tags": [
                    "Sessions"
                ],
                "summary": "List user sessions",
                "description": "Get all active sessions for authenticated user. Returns all non-revoked refresh tokens ordered by last usage.",
                "operationId": "9c723308a97b1e896f71b03ef5541c5a",
                "responses": {
                    "200": {
                        "description": "Sessions retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "sessions": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "sessionId": {
                                                        "description": "Session identifier",
                                                        "type": "string",
                                                        "format": "uuid",
                                                        "example": "9d4e3c2a-8b7f-4e5d-9c8b-7a6f5e4d3c2b"
                                                    },
                                                    "deviceName": {
                                                        "description": "Device name",
                                                        "type": "string",
                                                        "example": "Chrome on Windows",
                                                        "nullable": true
                                                    },
                                                    "ipAddress": {
                                                        "description": "IP address",
                                                        "type": "string",
                                                        "example": "192.168.1.1",
                                                        "nullable": true
                                                    },
                                                    "userAgent": {
                                                        "description": "User agent string",
                                                        "type": "string",
                                                        "example": "Mozilla/5.0...",
                                                        "nullable": true
                                                    },
                                                    "lastUsedAt": {
                                                        "description": "Last usage timestamp (ISO 8601)",
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-11-01T12:00:00+00:00"
                                                    },
                                                    "expiresAt": {
                                                        "description": "Expiration timestamp (ISO 8601)",
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-11-08T12:00:00+00:00"
                                                    },
                                                    "isCurrent": {
                                                        "description": "Whether this is the current session",
                                                        "type": "boolean",
                                                        "example": true
                                                    },
                                                    "location": {
                                                        "description": "GeoIP location (not yet implemented)",
                                                        "type": "string",
                                                        "example": null,
                                                        "nullable": true
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/logout": {
            "post": {
                "tags": [
                    "Sessions"
                ],
                "summary": "Logout user",
                "description": "Logout from current session or all sessions. Revokes tokens, blacklists access token, and clears the refresh_token cookie.",
                "operationId": "b471d4a100ddd7d6def4d28f7f51b1e1",
                "requestBody": {
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "everywhere": {
                                        "description": "Logout from all sessions",
                                        "type": "boolean",
                                        "example": false,
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Logout successful. Cookie refresh_token is cleared.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Logged out successfully"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/sessions/{sessionId}": {
            "delete": {
                "tags": [
                    "Sessions"
                ],
                "summary": "Revoke a session",
                "description": "Revoke a specific session from another device. Blacklists associated access tokens and revokes the refresh token. Cannot revoke the current session.",
                "operationId": "f80106f8794ae1d6b079027b9d102edb",
                "parameters": [
                    {
                        "name": "sessionId",
                        "in": "path",
                        "description": "UUID of the session to revoke",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "example": "9d4e3c2a-8b7f-4e5d-9c8b-7a6f5e4d3c2b"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Session revoked successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Session revoked successfully"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "403": {
                        "description": "Not authorized to revoke this session"
                    },
                    "404": {
                        "description": "Session not found or already revoked"
                    },
                    "409": {
                        "description": "Conflict: Cannot revoke the current session. Use logout endpoint instead."
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/companies/minimal": {
            "get": {
                "tags": [
                    "Companies"
                ],
                "summary": "List minimal companies for selectors",
                "description": "Returns a paginated list of active companies with minimal information (id, code, name, logo). Public endpoint without authentication required.",
                "operationId": "list_companies_minimal",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Filter companies by name (case-insensitive search)",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Number of items per page",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 50
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number for pagination",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 1,
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Minimal company list with pagination",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid",
                                                        "example": "550e8400-e29b-41d4-a716-446655440000"
                                                    },
                                                    "company_code": {
                                                        "type": "string",
                                                        "example": "CMP-2025-00001"
                                                    },
                                                    "name": {
                                                        "type": "string",
                                                        "example": "Acme Corporation"
                                                    },
                                                    "logo_url": {
                                                        "type": "string",
                                                        "example": "https://example.com/logo.png",
                                                        "nullable": true
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "meta": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer",
                                                    "example": 150
                                                },
                                                "current_page": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "last_page": {
                                                    "type": "integer",
                                                    "example": 3
                                                },
                                                "per_page": {
                                                    "type": "integer",
                                                    "example": 50
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "links": {
                                            "properties": {
                                                "first": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "last": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "prev": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "next": {
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/companies/explore": {
            "get": {
                "tags": [
                    "Companies"
                ],
                "summary": "Explore companies with filters",
                "description": "Returns paginated list of companies with extended information for exploration. Includes follow indicators specific to authenticated user. Requires JWT authentication.",
                "operationId": "explore_companies",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Search companies by name",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "industry_id",
                        "in": "query",
                        "description": "Filter by industry UUID",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    },
                    {
                        "name": "country",
                        "in": "query",
                        "description": "Filter by country",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "followed_by_me",
                        "in": "query",
                        "description": "Show only companies followed by the user",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "default": false
                        }
                    },
                    {
                        "name": "sort_by",
                        "in": "query",
                        "description": "Field to sort results by",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "sort_direction",
                        "in": "query",
                        "description": "Sort direction",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "asc",
                                "desc"
                            ]
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Number of items per page",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 20
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number for pagination",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 1,
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Company list with extended information",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid"
                                                    },
                                                    "company_code": {
                                                        "type": "string"
                                                    },
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "logo_url": {
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "website": {
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "contact_country": {
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "industry_id": {
                                                        "type": "string",
                                                        "format": "uuid",
                                                        "nullable": true
                                                    },
                                                    "industry": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "string",
                                                                "format": "uuid"
                                                            },
                                                            "code": {
                                                                "type": "string"
                                                            },
                                                            "name": {
                                                                "type": "string"
                                                            }
                                                        },
                                                        "type": "object",
                                                        "nullable": true
                                                    },
                                                    "followers_count": {
                                                        "type": "integer"
                                                    },
                                                    "is_followed_by_me": {
                                                        "type": "boolean"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "meta": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "links": {
                                            "properties": {
                                                "first": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "last": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "prev": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "next": {
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated (invalid or missing JWT token)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/companies": {
            "get": {
                "tags": [
                    "Companies"
                ],
                "summary": "List all companies (admin)",
                "description": "Returns complete company list with all information and calculated fields. Requires HELPDESK_ADMIN or COMPANY_ADMIN role. COMPANY_ADMIN users can only see their own company.",
                "operationId": "list_companies",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Search companies by name",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Filter by company status",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "active",
                                "suspended",
                                "inactive"
                            ]
                        }
                    },
                    {
                        "name": "industry_id",
                        "in": "query",
                        "description": "Filter by industry UUID",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    },
                    {
                        "name": "sort_by",
                        "in": "query",
                        "description": "Field to sort results by",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "sort_direction",
                        "in": "query",
                        "description": "Sort direction",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "asc",
                                "desc"
                            ]
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Number of items per page",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 20
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number for pagination",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 1,
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Complete company list with administrative information",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid"
                                                    },
                                                    "company_code": {
                                                        "type": "string"
                                                    },
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "status": {
                                                        "type": "string",
                                                        "enum": [
                                                            "active",
                                                            "suspended",
                                                            "inactive"
                                                        ]
                                                    },
                                                    "industry_id": {
                                                        "type": "string",
                                                        "format": "uuid",
                                                        "nullable": true
                                                    },
                                                    "industry": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "string",
                                                                "format": "uuid"
                                                            },
                                                            "code": {
                                                                "type": "string"
                                                            },
                                                            "name": {
                                                                "type": "string"
                                                            },
                                                            "description": {
                                                                "type": "string",
                                                                "nullable": true
                                                            }
                                                        },
                                                        "type": "object",
                                                        "nullable": true
                                                    },
                                                    "admin": {
                                                        "type": "object"
                                                    },
                                                    "followers_count": {
                                                        "type": "integer"
                                                    },
                                                    "active_agents_count": {
                                                        "type": "integer"
                                                    },
                                                    "total_users_count": {
                                                        "type": "integer"
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "meta": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "links": {
                                            "properties": {
                                                "first": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "last": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "prev": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "next": {
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated (invalid or missing JWT token)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden (requires administrator role)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Forbidden."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Companies"
                ],
                "summary": "Create new company",
                "description": "Creates a new company directly without request process. Only available for users with PLATFORM_ADMIN role. Automatically assigns COMPANY_ADMIN role to the designated administrator user.",
                "operationId": "create_company",
                "requestBody": {
                    "description": "New company data",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "legal_name",
                                    "support_email",
                                    "admin_user_id"
                                ],
                                "properties": {
                                    "name": {
                                        "description": "Company trade name",
                                        "type": "string",
                                        "maxLength": 255,
                                        "minLength": 2,
                                        "example": "Acme Corporation"
                                    },
                                    "legal_name": {
                                        "description": "Legal company name",
                                        "type": "string",
                                        "maxLength": 255,
                                        "minLength": 2,
                                        "example": "Acme Corp S.A."
                                    },
                                    "support_email": {
                                        "description": "Support email address",
                                        "type": "string",
                                        "format": "email",
                                        "maxLength": 255,
                                        "example": "support@acme.com"
                                    },
                                    "phone": {
                                        "description": "Contact phone number",
                                        "type": "string",
                                        "maxLength": 20,
                                        "example": "+56912345678",
                                        "nullable": true
                                    },
                                    "website": {
                                        "description": "Company website",
                                        "type": "string",
                                        "format": "uri",
                                        "maxLength": 255,
                                        "example": "https://acme.com",
                                        "nullable": true
                                    },
                                    "admin_user_id": {
                                        "description": "User ID who will be the company administrator (required)",
                                        "type": "string",
                                        "format": "uuid"
                                    },
                                    "contact_address": {
                                        "description": "Physical address",
                                        "type": "string",
                                        "maxLength": 255,
                                        "nullable": true
                                    },
                                    "contact_city": {
                                        "description": "City",
                                        "type": "string",
                                        "maxLength": 100,
                                        "nullable": true
                                    },
                                    "contact_state": {
                                        "description": "State/Region",
                                        "type": "string",
                                        "maxLength": 100,
                                        "nullable": true
                                    },
                                    "contact_country": {
                                        "description": "Country",
                                        "type": "string",
                                        "maxLength": 100,
                                        "nullable": true
                                    },
                                    "contact_postal_code": {
                                        "description": "Postal code",
                                        "type": "string",
                                        "maxLength": 20,
                                        "nullable": true
                                    },
                                    "tax_id": {
                                        "description": "Tax ID (RUT/NIT)",
                                        "type": "string",
                                        "maxLength": 50,
                                        "nullable": true
                                    },
                                    "legal_representative": {
                                        "description": "Legal representative name",
                                        "type": "string",
                                        "maxLength": 255,
                                        "nullable": true
                                    },
                                    "business_hours": {
                                        "description": "Business hours (JSONB)",
                                        "type": "object",
                                        "example": {
                                            "monday": {
                                                "open": "09:00",
                                                "close": "18:00"
                                            }
                                        },
                                        "nullable": true
                                    },
                                    "timezone": {
                                        "description": "Timezone (e.g., America/Santiago)",
                                        "type": "string",
                                        "example": "America/Santiago",
                                        "nullable": true
                                    },
                                    "settings": {
                                        "description": "Additional settings (JSONB)",
                                        "type": "object",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Company created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "string",
                                            "format": "uuid"
                                        },
                                        "company_code": {
                                            "type": "string"
                                        },
                                        "name": {
                                            "type": "string"
                                        },
                                        "status": {
                                            "type": "string",
                                            "example": "active"
                                        },
                                        "admin": {
                                            "type": "object"
                                        },
                                        "created_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden (requires PLATFORM_ADMIN role)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Forbidden."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/companies/{company}": {
            "get": {
                "tags": [
                    "Companies"
                ],
                "summary": "View complete company details",
                "description": "Returns all information about a specific company including calculated fields, admin info, and user follow status. Requires authentication and access permissions.",
                "operationId": "show_company",
                "parameters": [
                    {
                        "name": "company",
                        "in": "path",
                        "description": "Company ID or UUID",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Complete company details",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "string",
                                            "format": "uuid"
                                        },
                                        "company_code": {
                                            "type": "string"
                                        },
                                        "name": {
                                            "type": "string"
                                        },
                                        "legal_name": {
                                            "type": "string",
                                            "nullable": true
                                        },
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "active",
                                                "suspended",
                                                "inactive"
                                            ]
                                        },
                                        "support_email": {
                                            "type": "string",
                                            "format": "email"
                                        },
                                        "phone": {
                                            "type": "string",
                                            "nullable": true
                                        },
                                        "website": {
                                            "type": "string",
                                            "nullable": true
                                        },
                                        "logo_url": {
                                            "type": "string",
                                            "nullable": true
                                        },
                                        "industry_id": {
                                            "type": "string",
                                            "format": "uuid",
                                            "nullable": true
                                        },
                                        "industry": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "code": {
                                                    "type": "string"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "description": {
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object",
                                            "nullable": true
                                        },
                                        "admin": {
                                            "type": "object"
                                        },
                                        "followers_count": {
                                            "type": "integer"
                                        },
                                        "active_agents_count": {
                                            "type": "integer"
                                        },
                                        "total_users_count": {
                                            "type": "integer"
                                        },
                                        "is_followed_by_me": {
                                            "type": "boolean"
                                        },
                                        "created_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "updated_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated (invalid or missing JWT token)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden (no permission to view this company)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Forbidden."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Company not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Company not found."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Companies"
                ],
                "summary": "Update company",
                "description": "Updates information of an existing company. Requires being PLATFORM_ADMIN or COMPANY_ADMIN owner of the company. All fields are optional.",
                "operationId": "update_company",
                "parameters": [
                    {
                        "name": "company",
                        "in": "path",
                        "description": "Company ID or UUID to update",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Data to update (all fields are optional)",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "description": "Trade name (2-255 characters)",
                                        "type": "string",
                                        "maxLength": 255,
                                        "minLength": 2,
                                        "nullable": true
                                    },
                                    "legal_name": {
                                        "description": "Legal name (2-255 characters)",
                                        "type": "string",
                                        "maxLength": 255,
                                        "minLength": 2,
                                        "nullable": true
                                    },
                                    "support_email": {
                                        "description": "Support email (max 255 characters)",
                                        "type": "string",
                                        "format": "email",
                                        "maxLength": 255,
                                        "nullable": true
                                    },
                                    "phone": {
                                        "description": "Phone number (max 20 characters)",
                                        "type": "string",
                                        "maxLength": 20,
                                        "nullable": true
                                    },
                                    "website": {
                                        "description": "Website URL (max 255 characters)",
                                        "type": "string",
                                        "format": "uri",
                                        "maxLength": 255,
                                        "nullable": true
                                    },
                                    "contact_address": {
                                        "description": "Address (max 255 characters)",
                                        "type": "string",
                                        "maxLength": 255,
                                        "nullable": true
                                    },
                                    "contact_city": {
                                        "description": "City (max 100 characters)",
                                        "type": "string",
                                        "maxLength": 100,
                                        "nullable": true
                                    },
                                    "contact_state": {
                                        "description": "State/Region (max 100 characters)",
                                        "type": "string",
                                        "maxLength": 100,
                                        "nullable": true
                                    },
                                    "contact_country": {
                                        "description": "Country (max 100 characters)",
                                        "type": "string",
                                        "maxLength": 100,
                                        "nullable": true
                                    },
                                    "contact_postal_code": {
                                        "description": "Postal code (max 20 characters)",
                                        "type": "string",
                                        "maxLength": 20,
                                        "nullable": true
                                    },
                                    "tax_id": {
                                        "description": "Tax ID (RUT/NIT, max 50 characters)",
                                        "type": "string",
                                        "maxLength": 50,
                                        "nullable": true
                                    },
                                    "legal_representative": {
                                        "description": "Legal representative (max 255 characters)",
                                        "type": "string",
                                        "maxLength": 255,
                                        "nullable": true
                                    },
                                    "business_hours": {
                                        "description": "Business hours (JSONB)",
                                        "type": "object",
                                        "nullable": true
                                    },
                                    "timezone": {
                                        "description": "Timezone (e.g., America/Santiago)",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "logo_url": {
                                        "description": "Logo URL",
                                        "type": "string",
                                        "format": "uri",
                                        "maxLength": 255,
                                        "nullable": true
                                    },
                                    "favicon_url": {
                                        "description": "Favicon URL",
                                        "type": "string",
                                        "format": "uri",
                                        "maxLength": 255,
                                        "nullable": true
                                    },
                                    "primary_color": {
                                        "description": "Primary color in hexadecimal format",
                                        "type": "string",
                                        "pattern": "^#[0-9A-Fa-f]{6}$",
                                        "example": "#FF5733",
                                        "nullable": true
                                    },
                                    "secondary_color": {
                                        "description": "Secondary color in hexadecimal format",
                                        "type": "string",
                                        "pattern": "^#[0-9A-Fa-f]{6}$",
                                        "example": "#33FF57",
                                        "nullable": true
                                    },
                                    "settings": {
                                        "description": "Additional settings (JSONB)",
                                        "type": "object",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Company updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "string",
                                            "format": "uuid"
                                        },
                                        "company_code": {
                                            "type": "string"
                                        },
                                        "name": {
                                            "type": "string"
                                        },
                                        "status": {
                                            "type": "string"
                                        },
                                        "admin": {
                                            "type": "object"
                                        },
                                        "followers_count": {
                                            "type": "integer"
                                        },
                                        "active_agents_count": {
                                            "type": "integer"
                                        },
                                        "total_users_count": {
                                            "type": "integer"
                                        },
                                        "is_followed_by_me": {
                                            "type": "boolean"
                                        },
                                        "updated_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden (no permission to update this company)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Forbidden."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Company not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Company not found."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/companies/followed": {
            "get": {
                "tags": [
                    "Company Followers"
                ],
                "summary": "List companies followed by authenticated user",
                "description": "Returns all companies that the authenticated user is following, ordered by most recent follow first. Includes company details and user-specific metrics like ticket count.",
                "operationId": "list_followed_companies",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number for pagination",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Number of items per page",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "maximum": 100,
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of companies followed by the authenticated user",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid"
                                                    },
                                                    "company": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "string",
                                                                "format": "uuid"
                                                            },
                                                            "companyCode": {
                                                                "type": "string"
                                                            },
                                                            "name": {
                                                                "type": "string"
                                                            },
                                                            "logoUrl": {
                                                                "type": "string",
                                                                "format": "uri",
                                                                "nullable": true
                                                            }
                                                        },
                                                        "type": "object"
                                                    },
                                                    "followedAt": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    },
                                                    "myTicketsCount": {
                                                        "type": "integer"
                                                    },
                                                    "lastTicketCreatedAt": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "nullable": true
                                                    },
                                                    "hasUnreadAnnouncements": {
                                                        "type": "boolean"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/companies/{company}/is-following": {
            "get": {
                "tags": [
                    "Company Followers"
                ],
                "summary": "Check if user follows a company",
                "description": "Verifies if the authenticated user is currently following the specified company.",
                "operationId": "check_if_following",
                "parameters": [
                    {
                        "name": "company",
                        "in": "path",
                        "description": "Company UUID or identifier",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Follow status retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "properties": {
                                                "isFollowing": {
                                                    "type": "boolean"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "404": {
                        "description": "Company not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/companies/{company}/follow": {
            "post": {
                "tags": [
                    "Company Followers"
                ],
                "summary": "Follow a company",
                "description": "Allows the authenticated user to start following a company. If already following, returns current follow status. Rate limited to 20 requests per hour.",
                "operationId": "follow_company",
                "parameters": [
                    {
                        "name": "company",
                        "in": "path",
                        "description": "Company UUID or identifier",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Already following the company",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        },
                                        "company": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "companyCode": {
                                                    "type": "string"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "logoUrl": {
                                                    "type": "string",
                                                    "format": "uri",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "followedAt": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "201": {
                        "description": "Successfully started following the company",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        },
                                        "company": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "companyCode": {
                                                    "type": "string"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "logoUrl": {
                                                    "type": "string",
                                                    "format": "uri",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "followedAt": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "404": {
                        "description": "Company not found"
                    },
                    "409": {
                        "description": "Already following this company"
                    },
                    "429": {
                        "description": "Too many follow requests (rate limit exceeded)"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/companies/{company}/unfollow": {
            "delete": {
                "tags": [
                    "Company Followers"
                ],
                "summary": "Unfollow a company",
                "description": "Allows the authenticated user to stop following a company. Returns an error if the user is not currently following the company.",
                "operationId": "unfollow_company",
                "parameters": [
                    {
                        "name": "company",
                        "in": "path",
                        "description": "Company UUID or identifier",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully unfollowed the company",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "404": {
                        "description": "Company not found"
                    },
                    "409": {
                        "description": "User is not following this company"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/company-industries": {
            "get": {
                "tags": [
                    "Company Industries"
                ],
                "summary": "Listar todas las industrias disponibles",
                "description": "Obtiene el catálogo completo de industrias para selección en formularios. Endpoint público sin autenticación requerida. Opcionalmente incluye conteos de empresas activas por industria.",
                "operationId": "list_company_industries",
                "parameters": [
                    {
                        "name": "with_counts",
                        "in": "query",
                        "description": "Incluir conteo de empresas activas por industria (default: false)",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de industrias obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid",
                                                        "example": "550e8400-e29b-41d4-a716-446655440000"
                                                    },
                                                    "code": {
                                                        "description": "Código único de la industria",
                                                        "type": "string",
                                                        "example": "technology"
                                                    },
                                                    "name": {
                                                        "description": "Nombre de la industria",
                                                        "type": "string",
                                                        "example": "Tecnología"
                                                    },
                                                    "description": {
                                                        "description": "Descripción de la industria",
                                                        "type": "string",
                                                        "example": "Empresas de tecnología y software",
                                                        "nullable": true
                                                    },
                                                    "createdAt": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-10-31T12:00:00Z"
                                                    },
                                                    "activeCompaniesCount": {
                                                        "description": "Conteo de empresas activas (solo si with_counts=true)",
                                                        "type": "integer",
                                                        "example": 45
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/company-requests/{companyRequest}/approve": {
            "post": {
                "tags": [
                    "Company Requests - Admin"
                ],
                "summary": "Approve company request",
                "description": "Approves a company request. Automatically: creates company, creates admin user, assigns COMPANY_ADMIN role, generates temporary password (valid 7 days), sends email with credentials",
                "operationId": "approve_company_request",
                "parameters": [
                    {
                        "name": "companyRequest",
                        "in": "path",
                        "description": "Company request UUID",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "9d8e4f1a-2b3c-4d5e-6f7a-8b9c0d1e2f3a"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Additional approval data (optional)",
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "notes": {
                                        "description": "Additional notes",
                                        "type": "string",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Request approved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Solicitud aprobada exitosamente. Se ha creado la empresa 'TechCorp Bolivia' y se envió un email con las credenciales de acceso a admin@techcorp.com.bo."
                                                },
                                                "company": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "string",
                                                            "format": "uuid",
                                                            "example": "9d8e4f1a-2b3c-4d5e-6f7a-8b9c0d1e2f3a"
                                                        },
                                                        "companyCode": {
                                                            "type": "string",
                                                            "example": "COMP-20250001"
                                                        },
                                                        "name": {
                                                            "type": "string",
                                                            "example": "TechCorp Bolivia"
                                                        },
                                                        "legalName": {
                                                            "type": "string",
                                                            "example": "TechCorp Bolivia S.R.L.",
                                                            "nullable": true
                                                        },
                                                        "description": {
                                                            "type": "string",
                                                            "example": "Empresa líder en soluciones tecnológicas para el sector empresarial",
                                                            "nullable": true
                                                        },
                                                        "status": {
                                                            "type": "string",
                                                            "example": "ACTIVE"
                                                        },
                                                        "industryId": {
                                                            "type": "string",
                                                            "format": "uuid",
                                                            "example": "7c6d5e4f-3a2b-1c0d-9e8f-7a6b5c4d3e2f",
                                                            "nullable": true
                                                        },
                                                        "industry": {
                                                            "properties": {
                                                                "id": {
                                                                    "type": "string",
                                                                    "format": "uuid",
                                                                    "example": "7c6d5e4f-3a2b-1c0d-9e8f-7a6b5c4d3e2f"
                                                                },
                                                                "code": {
                                                                    "type": "string",
                                                                    "example": "TECH"
                                                                },
                                                                "name": {
                                                                    "type": "string",
                                                                    "example": "Tecnología"
                                                                }
                                                            },
                                                            "type": "object",
                                                            "nullable": true
                                                        },
                                                        "adminId": {
                                                            "type": "string",
                                                            "format": "uuid",
                                                            "example": "1a2b3c4d-5e6f-7a8b-9c0d-1e2f3a4b5c6d"
                                                        },
                                                        "adminEmail": {
                                                            "type": "string",
                                                            "format": "email",
                                                            "example": "admin@techcorp.com.bo"
                                                        },
                                                        "adminName": {
                                                            "type": "string",
                                                            "example": "Juan Carlos Pérez"
                                                        },
                                                        "createdAt": {
                                                            "type": "string",
                                                            "format": "date-time",
                                                            "example": "2025-11-01T10:30:00+00:00"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "newUserCreated": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "notificationSentTo": {
                                                    "type": "string",
                                                    "format": "email",
                                                    "example": "admin@techcorp.com.bo"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "403": {
                        "description": "Forbidden - requires PLATFORM_ADMIN role"
                    },
                    "404": {
                        "description": "Request not found"
                    },
                    "409": {
                        "description": "Request already processed"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/company-requests/{companyRequest}/reject": {
            "post": {
                "tags": [
                    "Company Requests - Admin"
                ],
                "summary": "Reject company request",
                "description": "Rejects a company request. Automatically: marks as REJECTED, sends email to requester with rejection reason",
                "operationId": "reject_company_request",
                "parameters": [
                    {
                        "name": "companyRequest",
                        "in": "path",
                        "description": "Company request UUID",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "9d8e4f1a-2b3c-4d5e-6f7a-8b9c0d1e2f3a"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Rejection reason",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "reason"
                                ],
                                "properties": {
                                    "reason": {
                                        "description": "Rejection reason (required, minimum 10 characters)",
                                        "type": "string",
                                        "minLength": 10
                                    },
                                    "notes": {
                                        "description": "Additional notes",
                                        "type": "string",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Request rejected successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "La solicitud de empresa 'TechCorp Bolivia' ha sido rechazada. Se ha enviado un email a admin@techcorp.com.bo con la razón del rechazo."
                                                },
                                                "reason": {
                                                    "description": "Rejection reason",
                                                    "type": "string",
                                                    "example": "La documentación proporcionada no cumple con los requisitos mínimos establecidos. Por favor, adjunte el NIT actualizado y el testimonio de constitución."
                                                },
                                                "notificationSentTo": {
                                                    "type": "string",
                                                    "format": "email",
                                                    "example": "admin@techcorp.com.bo"
                                                },
                                                "requestCode": {
                                                    "type": "string",
                                                    "example": "REQ-20250001"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "403": {
                        "description": "Forbidden - requires PLATFORM_ADMIN role"
                    },
                    "404": {
                        "description": "Request not found"
                    },
                    "409": {
                        "description": "Request already processed"
                    },
                    "422": {
                        "description": "Validation error - reason is required"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/company-requests": {
            "get": {
                "tags": [
                    "Company Requests"
                ],
                "summary": "List company requests",
                "description": "Returns paginated list of company requests. Requires PLATFORM_ADMIN role. Includes eager loading of reviewer and createdCompany.",
                "operationId": "list_company_requests",
                "parameters": [
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Filter by request status",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "PENDING",
                                "APPROVED",
                                "REJECTED"
                            ]
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Search by company name",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "sort",
                        "in": "query",
                        "description": "Field to sort by",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "order",
                        "in": "query",
                        "description": "Sort direction",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "asc",
                                "desc"
                            ]
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Number of items per page",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 15
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 1,
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of company requests",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid",
                                                        "example": "550e8400-e29b-41d4-a716-446655440000"
                                                    },
                                                    "requestCode": {
                                                        "type": "string",
                                                        "example": "REQ-20251101-001"
                                                    },
                                                    "companyName": {
                                                        "type": "string",
                                                        "example": "TechCorp Solutions"
                                                    },
                                                    "legalName": {
                                                        "type": "string",
                                                        "example": "TechCorp Solutions S.A.",
                                                        "nullable": true
                                                    },
                                                    "adminEmail": {
                                                        "type": "string",
                                                        "format": "email",
                                                        "example": "admin@techcorp.com"
                                                    },
                                                    "businessDescription": {
                                                        "type": "string",
                                                        "example": "We are a leading technology solutions company with over 10 years of experience providing enterprise software solutions to businesses worldwide.",
                                                        "nullable": true
                                                    },
                                                    "requestMessage": {
                                                        "type": "string",
                                                        "example": "We need a professional helpdesk system for our customer support team of 50+ agents.",
                                                        "nullable": true
                                                    },
                                                    "website": {
                                                        "type": "string",
                                                        "format": "uri",
                                                        "example": "https://techcorp.com",
                                                        "nullable": true
                                                    },
                                                    "industryId": {
                                                        "type": "string",
                                                        "format": "uuid",
                                                        "example": "650e8400-e29b-41d4-a716-446655440001",
                                                        "nullable": true
                                                    },
                                                    "industry": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "string",
                                                                "format": "uuid",
                                                                "example": "650e8400-e29b-41d4-a716-446655440001"
                                                            },
                                                            "code": {
                                                                "type": "string",
                                                                "example": "TECH"
                                                            },
                                                            "name": {
                                                                "type": "string",
                                                                "example": "Technology"
                                                            }
                                                        },
                                                        "type": "object",
                                                        "nullable": true
                                                    },
                                                    "estimatedUsers": {
                                                        "type": "integer",
                                                        "example": 500,
                                                        "nullable": true
                                                    },
                                                    "contactAddress": {
                                                        "type": "string",
                                                        "example": "Main Avenue 123, Office 456",
                                                        "nullable": true
                                                    },
                                                    "contactCity": {
                                                        "type": "string",
                                                        "example": "Santiago",
                                                        "nullable": true
                                                    },
                                                    "contactCountry": {
                                                        "type": "string",
                                                        "example": "Chile",
                                                        "nullable": true
                                                    },
                                                    "contactPostalCode": {
                                                        "type": "string",
                                                        "example": "8340000",
                                                        "nullable": true
                                                    },
                                                    "taxId": {
                                                        "type": "string",
                                                        "example": "12.345.678-9",
                                                        "nullable": true
                                                    },
                                                    "status": {
                                                        "type": "string",
                                                        "enum": [
                                                            "PENDING",
                                                            "APPROVED",
                                                            "REJECTED"
                                                        ],
                                                        "example": "APPROVED"
                                                    },
                                                    "reviewedAt": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-11-01T14:30:00Z",
                                                        "nullable": true
                                                    },
                                                    "rejectionReason": {
                                                        "type": "string",
                                                        "example": null,
                                                        "nullable": true
                                                    },
                                                    "reviewer": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "string",
                                                                "format": "uuid",
                                                                "example": "750e8400-e29b-41d4-a716-446655440002"
                                                            },
                                                            "user_code": {
                                                                "type": "string",
                                                                "example": "USR-ADMIN-001"
                                                            },
                                                            "email": {
                                                                "type": "string",
                                                                "format": "email",
                                                                "example": "platform.admin@helpdesk.com"
                                                            },
                                                            "name": {
                                                                "type": "string",
                                                                "example": "John Administrator"
                                                            }
                                                        },
                                                        "type": "object",
                                                        "nullable": true
                                                    },
                                                    "createdCompany": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "string",
                                                                "format": "uuid",
                                                                "example": "850e8400-e29b-41d4-a716-446655440003"
                                                            },
                                                            "companyCode": {
                                                                "type": "string",
                                                                "example": "COMP-TECH-001"
                                                            },
                                                            "name": {
                                                                "type": "string",
                                                                "example": "TechCorp Solutions"
                                                            },
                                                            "logoUrl": {
                                                                "type": "string",
                                                                "example": "https://storage.example.com/logos/techcorp.png",
                                                                "nullable": true
                                                            }
                                                        },
                                                        "type": "object",
                                                        "nullable": true
                                                    },
                                                    "createdAt": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-11-01T10:00:00Z"
                                                    },
                                                    "updatedAt": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-11-01T14:30:00Z"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "meta": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "links": {
                                            "properties": {
                                                "first": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "last": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "prev": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "next": {
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "403": {
                        "description": "Forbidden - requires PLATFORM_ADMIN role"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Company Requests"
                ],
                "summary": "Create company request",
                "description": "Public endpoint to create new company request. Rate limit: 3 requests per hour. Automatic validation of duplicate email in pending requests.",
                "operationId": "create_company_request",
                "requestBody": {
                    "description": "Company request data",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "company_name",
                                    "admin_email",
                                    "company_description",
                                    "industry_id"
                                ],
                                "properties": {
                                    "company_name": {
                                        "description": "Company name (2-200 characters)",
                                        "type": "string",
                                        "maxLength": 200,
                                        "minLength": 2,
                                        "example": "TechCorp Solutions"
                                    },
                                    "legal_name": {
                                        "description": "Legal company name (2-200 characters)",
                                        "type": "string",
                                        "maxLength": 200,
                                        "minLength": 2,
                                        "example": "TechCorp Solutions S.A.",
                                        "nullable": true
                                    },
                                    "admin_email": {
                                        "description": "Administrator email (max 255 characters)",
                                        "type": "string",
                                        "format": "email",
                                        "maxLength": 255,
                                        "example": "admin@techcorp.com"
                                    },
                                    "company_description": {
                                        "description": "Company description (50-1000 characters)",
                                        "type": "string",
                                        "maxLength": 1000,
                                        "minLength": 50,
                                        "example": "We are a leading technology solutions company with over 10 years of experience..."
                                    },
                                    "website": {
                                        "description": "Company website (max 255 characters)",
                                        "type": "string",
                                        "format": "uri",
                                        "maxLength": 255,
                                        "example": "https://techcorp.com",
                                        "nullable": true
                                    },
                                    "industry_id": {
                                        "description": "Industry UUID (reference to company_industries)",
                                        "type": "string",
                                        "format": "uuid",
                                        "example": "550e8400-e29b-41d4-a716-446655440000"
                                    },
                                    "request_message": {
                                        "description": "Request message (10-500 characters)",
                                        "type": "string",
                                        "maxLength": 500,
                                        "minLength": 10,
                                        "example": "We need a professional helpdesk system for our customer support"
                                    },
                                    "estimated_users": {
                                        "description": "Estimated number of users (1-10000)",
                                        "type": "integer",
                                        "maximum": 10000,
                                        "minimum": 1,
                                        "example": 500,
                                        "nullable": true
                                    },
                                    "contact_address": {
                                        "description": "Contact address (max 255 characters)",
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "Main Avenue 123",
                                        "nullable": true
                                    },
                                    "contact_city": {
                                        "description": "City (max 100 characters)",
                                        "type": "string",
                                        "maxLength": 100,
                                        "example": "Santiago",
                                        "nullable": true
                                    },
                                    "contact_country": {
                                        "description": "Country (max 100 characters)",
                                        "type": "string",
                                        "maxLength": 100,
                                        "example": "Chile",
                                        "nullable": true
                                    },
                                    "contact_postal_code": {
                                        "description": "Postal code (max 20 characters)",
                                        "type": "string",
                                        "maxLength": 20,
                                        "example": "8340000",
                                        "nullable": true
                                    },
                                    "tax_id": {
                                        "description": "Tax ID - RUT/NIT (max 50 characters)",
                                        "type": "string",
                                        "maxLength": 50,
                                        "example": "12.345.678-9",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Company request created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "string",
                                            "format": "uuid",
                                            "example": "550e8400-e29b-41d4-a716-446655440000"
                                        },
                                        "requestCode": {
                                            "type": "string",
                                            "example": "REQ-20251101-001"
                                        },
                                        "companyName": {
                                            "type": "string",
                                            "example": "TechCorp Solutions"
                                        },
                                        "legalName": {
                                            "type": "string",
                                            "example": "TechCorp Solutions S.A.",
                                            "nullable": true
                                        },
                                        "adminEmail": {
                                            "type": "string",
                                            "format": "email",
                                            "example": "admin@techcorp.com"
                                        },
                                        "businessDescription": {
                                            "type": "string",
                                            "example": "We are a leading technology solutions company...",
                                            "nullable": true
                                        },
                                        "requestMessage": {
                                            "type": "string",
                                            "example": "We need a professional helpdesk system for our customer support",
                                            "nullable": true
                                        },
                                        "website": {
                                            "type": "string",
                                            "format": "uri",
                                            "example": "https://techcorp.com",
                                            "nullable": true
                                        },
                                        "industryId": {
                                            "type": "string",
                                            "format": "uuid",
                                            "example": "550e8400-e29b-41d4-a716-446655440000",
                                            "nullable": true
                                        },
                                        "industry": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "550e8400-e29b-41d4-a716-446655440000"
                                                },
                                                "code": {
                                                    "type": "string",
                                                    "example": "TECH"
                                                },
                                                "name": {
                                                    "type": "string",
                                                    "example": "Technology"
                                                }
                                            },
                                            "type": "object",
                                            "nullable": true
                                        },
                                        "estimatedUsers": {
                                            "type": "integer",
                                            "example": 500,
                                            "nullable": true
                                        },
                                        "contactAddress": {
                                            "type": "string",
                                            "example": "Main Avenue 123",
                                            "nullable": true
                                        },
                                        "contactCity": {
                                            "type": "string",
                                            "example": "Santiago",
                                            "nullable": true
                                        },
                                        "contactCountry": {
                                            "type": "string",
                                            "example": "Chile",
                                            "nullable": true
                                        },
                                        "contactPostalCode": {
                                            "type": "string",
                                            "example": "8340000",
                                            "nullable": true
                                        },
                                        "taxId": {
                                            "type": "string",
                                            "example": "12.345.678-9",
                                            "nullable": true
                                        },
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "PENDING"
                                            ],
                                            "example": "PENDING"
                                        },
                                        "reviewedAt": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": null,
                                            "nullable": true
                                        },
                                        "rejectionReason": {
                                            "type": "string",
                                            "example": null,
                                            "nullable": true
                                        },
                                        "reviewer": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "user_code": {
                                                    "type": "string"
                                                },
                                                "email": {
                                                    "type": "string",
                                                    "format": "email"
                                                },
                                                "name": {
                                                    "type": "string"
                                                }
                                            },
                                            "type": "object",
                                            "example": null,
                                            "nullable": true
                                        },
                                        "createdCompany": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "companyCode": {
                                                    "type": "string"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "logoUrl": {
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object",
                                            "example": null,
                                            "nullable": true
                                        },
                                        "createdAt": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-11-01T12:00:00Z"
                                        },
                                        "updatedAt": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-11-01T12:00:00Z"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error - invalid data or duplicate email"
                    },
                    "429": {
                        "description": "Rate limit exceeded - maximum 3 requests per hour"
                    }
                }
            }
        },
        "/api/users/me/profile": {
            "get": {
                "tags": [
                    "User Profile"
                ],
                "summary": "Get authenticated user profile",
                "description": "Retrieve the complete profile information of the currently authenticated user",
                "operationId": "get_my_profile",
                "responses": {
                    "200": {
                        "description": "Profile retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "firstName": {
                                                    "description": "User first name",
                                                    "type": "string",
                                                    "example": "Juan"
                                                },
                                                "lastName": {
                                                    "description": "User last name",
                                                    "type": "string",
                                                    "example": "Pérez"
                                                },
                                                "displayName": {
                                                    "description": "Display name (firstName + lastName)",
                                                    "type": "string",
                                                    "example": "Juan Pérez"
                                                },
                                                "phoneNumber": {
                                                    "description": "Phone number",
                                                    "type": "string",
                                                    "example": "+56912345678",
                                                    "nullable": true
                                                },
                                                "avatarUrl": {
                                                    "description": "Avatar image URL",
                                                    "type": "string",
                                                    "example": "https://example.com/avatars/user123.jpg",
                                                    "nullable": true
                                                },
                                                "theme": {
                                                    "description": "UI theme preference",
                                                    "type": "string",
                                                    "enum": [
                                                        "light",
                                                        "dark"
                                                    ],
                                                    "example": "light"
                                                },
                                                "language": {
                                                    "description": "Language preference",
                                                    "type": "string",
                                                    "enum": [
                                                        "es",
                                                        "en"
                                                    ],
                                                    "example": "es"
                                                },
                                                "timezone": {
                                                    "description": "Timezone identifier",
                                                    "type": "string",
                                                    "example": "America/Santiago"
                                                },
                                                "pushWebNotifications": {
                                                    "description": "Push web notifications enabled",
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "notificationsTickets": {
                                                    "description": "Ticket notifications enabled",
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "createdAt": {
                                                    "description": "Profile creation timestamp",
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-01-15T10:30:00Z"
                                                },
                                                "updatedAt": {
                                                    "description": "Last update timestamp",
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-11-01T14:25:30Z"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                },
                                "example": {
                                    "data": {
                                        "firstName": "Juan",
                                        "lastName": "Pérez",
                                        "displayName": "Juan Pérez",
                                        "phoneNumber": "+56912345678",
                                        "avatarUrl": "https://example.com/avatars/user123.jpg",
                                        "theme": "light",
                                        "language": "es",
                                        "timezone": "America/Santiago",
                                        "pushWebNotifications": true,
                                        "notificationsTickets": true,
                                        "createdAt": "2025-01-15T10:30:00Z",
                                        "updatedAt": "2025-11-01T14:25:30Z"
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "User Profile"
                ],
                "summary": "Update authenticated user profile",
                "description": "Update profile information for the currently authenticated user. Throttled: 30 requests/hour. All fields are optional.",
                "operationId": "update_my_profile",
                "requestBody": {
                    "description": "Profile fields to update. All fields are optional.",
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "firstName": {
                                        "description": "User first name",
                                        "type": "string",
                                        "maxLength": 100,
                                        "minLength": 2,
                                        "example": "María",
                                        "nullable": true
                                    },
                                    "lastName": {
                                        "description": "User last name",
                                        "type": "string",
                                        "maxLength": 100,
                                        "minLength": 2,
                                        "example": "González",
                                        "nullable": true
                                    },
                                    "phoneNumber": {
                                        "description": "Phone number (digits, spaces, +, -, (, ) allowed)",
                                        "type": "string",
                                        "maxLength": 20,
                                        "minLength": 10,
                                        "example": "+56912345678",
                                        "nullable": true
                                    },
                                    "avatarUrl": {
                                        "description": "Avatar image URL",
                                        "type": "string",
                                        "format": "uri",
                                        "maxLength": 2048,
                                        "example": "https://example.com/avatars/maria.jpg",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            },
                            "example": {
                                "firstName": "María",
                                "lastName": "González",
                                "phoneNumber": "+56987654321",
                                "avatarUrl": "https://example.com/avatars/maria.jpg"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Profile updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "userId": {
                                                    "description": "User ID",
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "9d4e8c91-5f2a-4b3e-8a1f-2c3d4e5f6a7b"
                                                },
                                                "profile": {
                                                    "description": "Updated profile data (ProfileResource with 12 fields)",
                                                    "properties": {
                                                        "firstName": {
                                                            "type": "string",
                                                            "example": "María"
                                                        },
                                                        "lastName": {
                                                            "type": "string",
                                                            "example": "González"
                                                        },
                                                        "displayName": {
                                                            "type": "string",
                                                            "example": "María González"
                                                        },
                                                        "phoneNumber": {
                                                            "type": "string",
                                                            "example": "+56987654321",
                                                            "nullable": true
                                                        },
                                                        "avatarUrl": {
                                                            "type": "string",
                                                            "example": "https://example.com/avatars/maria.jpg",
                                                            "nullable": true
                                                        },
                                                        "theme": {
                                                            "type": "string",
                                                            "example": "light"
                                                        },
                                                        "language": {
                                                            "type": "string",
                                                            "example": "es"
                                                        },
                                                        "timezone": {
                                                            "type": "string",
                                                            "example": "America/Santiago"
                                                        },
                                                        "pushWebNotifications": {
                                                            "type": "boolean",
                                                            "example": true
                                                        },
                                                        "notificationsTickets": {
                                                            "type": "boolean",
                                                            "example": true
                                                        },
                                                        "createdAt": {
                                                            "type": "string",
                                                            "format": "date-time",
                                                            "example": "2025-01-15T10:30:00Z"
                                                        },
                                                        "updatedAt": {
                                                            "type": "string",
                                                            "format": "date-time",
                                                            "example": "2025-11-01T15:45:20Z"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "updatedAt": {
                                                    "description": "Last update timestamp",
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-11-01T15:45:20Z"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                },
                                "example": {
                                    "data": {
                                        "userId": "9d4e8c91-5f2a-4b3e-8a1f-2c3d4e5f6a7b",
                                        "profile": {
                                            "firstName": "María",
                                            "lastName": "González",
                                            "displayName": "María González",
                                            "phoneNumber": "+56987654321",
                                            "avatarUrl": "https://example.com/avatars/maria.jpg",
                                            "theme": "light",
                                            "language": "es",
                                            "timezone": "America/Santiago",
                                            "pushWebNotifications": true,
                                            "notificationsTickets": true,
                                            "createdAt": "2025-01-15T10:30:00Z",
                                            "updatedAt": "2025-11-01T15:45:20Z"
                                        },
                                        "updatedAt": "2025-11-01T15:45:20Z"
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "example": {
                                                "firstName": [
                                                    "First name must be at least 2 characters"
                                                ],
                                                "phoneNumber": [
                                                    "Phone number format is invalid"
                                                ]
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/me/preferences": {
            "patch": {
                "tags": [
                    "User Profile"
                ],
                "summary": "Update authenticated user preferences",
                "description": "Update preferences for the currently authenticated user. Throttled: 50 requests/hour. All fields are optional.",
                "operationId": "update_my_preferences",
                "requestBody": {
                    "description": "Preference fields to update. All fields are optional.",
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "theme": {
                                        "description": "UI theme preference",
                                        "type": "string",
                                        "enum": [
                                            "light",
                                            "dark"
                                        ],
                                        "example": "dark",
                                        "nullable": true
                                    },
                                    "language": {
                                        "description": "Language preference (ISO 639-1)",
                                        "type": "string",
                                        "enum": [
                                            "es",
                                            "en"
                                        ],
                                        "example": "en",
                                        "nullable": true
                                    },
                                    "timezone": {
                                        "description": "Timezone identifier (IANA timezone database)",
                                        "type": "string",
                                        "example": "America/New_York",
                                        "nullable": true
                                    },
                                    "pushWebNotifications": {
                                        "description": "Enable push web notifications",
                                        "type": "boolean",
                                        "example": false,
                                        "nullable": true
                                    },
                                    "notificationsTickets": {
                                        "description": "Enable ticket notifications",
                                        "type": "boolean",
                                        "example": true,
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            },
                            "example": {
                                "theme": "dark",
                                "language": "en",
                                "timezone": "America/New_York",
                                "pushWebNotifications": false,
                                "notificationsTickets": true
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Preferences updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "userId": {
                                                    "description": "User ID",
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "9d4e8c91-5f2a-4b3e-8a1f-2c3d4e5f6a7b"
                                                },
                                                "preferences": {
                                                    "description": "Updated preferences data (PreferencesResource with 6 fields)",
                                                    "properties": {
                                                        "theme": {
                                                            "type": "string",
                                                            "enum": [
                                                                "light",
                                                                "dark"
                                                            ],
                                                            "example": "dark"
                                                        },
                                                        "language": {
                                                            "type": "string",
                                                            "enum": [
                                                                "es",
                                                                "en"
                                                            ],
                                                            "example": "en"
                                                        },
                                                        "timezone": {
                                                            "type": "string",
                                                            "example": "America/New_York"
                                                        },
                                                        "pushWebNotifications": {
                                                            "type": "boolean",
                                                            "example": false
                                                        },
                                                        "notificationsTickets": {
                                                            "type": "boolean",
                                                            "example": true
                                                        },
                                                        "updatedAt": {
                                                            "type": "string",
                                                            "format": "date-time",
                                                            "example": "2025-11-01T16:20:15Z"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "updatedAt": {
                                                    "description": "Last update timestamp",
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-11-01T16:20:15Z"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                },
                                "example": {
                                    "data": {
                                        "userId": "9d4e8c91-5f2a-4b3e-8a1f-2c3d4e5f6a7b",
                                        "preferences": {
                                            "theme": "dark",
                                            "language": "en",
                                            "timezone": "America/New_York",
                                            "pushWebNotifications": false,
                                            "notificationsTickets": true,
                                            "updatedAt": "2025-11-01T16:20:15Z"
                                        },
                                        "updatedAt": "2025-11-01T16:20:15Z"
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "422": {
                        "description": "Validation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "example": {
                                                "theme": [
                                                    "Theme must be either \"light\" or \"dark\""
                                                ],
                                                "language": [
                                                    "Language must be either \"es\" or \"en\""
                                                ],
                                                "timezone": [
                                                    "Invalid timezone"
                                                ]
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/roles": {
            "get": {
                "tags": [
                    "Roles"
                ],
                "summary": "Get all available roles",
                "description": "Returns list of all available roles in the system. Only PLATFORM_ADMIN or COMPANY_ADMIN can view roles",
                "operationId": "list_roles",
                "responses": {
                    "200": {
                        "description": "Roles retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "code": {
                                                        "description": "Role code",
                                                        "type": "string",
                                                        "enum": [
                                                            "USER",
                                                            "AGENT",
                                                            "COMPANY_ADMIN",
                                                            "PLATFORM_ADMIN"
                                                        ],
                                                        "example": "COMPANY_ADMIN"
                                                    },
                                                    "name": {
                                                        "description": "Role display name",
                                                        "type": "string",
                                                        "example": "Company Administrator"
                                                    },
                                                    "description": {
                                                        "description": "Role description",
                                                        "type": "string",
                                                        "example": "Manages company settings and users",
                                                        "nullable": true
                                                    },
                                                    "requiresCompany": {
                                                        "description": "Whether this role requires a company context",
                                                        "type": "boolean",
                                                        "example": true
                                                    },
                                                    "defaultDashboard": {
                                                        "description": "Default dashboard route for this role",
                                                        "type": "string",
                                                        "example": "/empresa/dashboard"
                                                    },
                                                    "isSystemRole": {
                                                        "description": "Whether this is a system-protected role",
                                                        "type": "boolean",
                                                        "example": true
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/{userId}/roles": {
            "post": {
                "tags": [
                    "Roles"
                ],
                "summary": "Assign a role to a user",
                "description": "Assign a role to a user with optional company context. Only PLATFORM_ADMIN or COMPANY_ADMIN can assign roles. Returns 200 if role was reactivated, 201 if newly assigned. Throttled: 100 requests/hour per authenticated user. Reactivates revoked roles if applicable.",
                "operationId": "assign_role_to_user",
                "parameters": [
                    {
                        "name": "userId",
                        "in": "path",
                        "description": "User UUID",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Role assignment data",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "roleCode"
                                ],
                                "properties": {
                                    "roleCode": {
                                        "description": "Role code to assign",
                                        "type": "string",
                                        "enum": [
                                            "USER",
                                            "AGENT",
                                            "COMPANY_ADMIN",
                                            "PLATFORM_ADMIN"
                                        ],
                                        "example": "AGENT"
                                    },
                                    "companyId": {
                                        "description": "Company UUID. REQUIRED if roleCode is AGENT or COMPANY_ADMIN. MUST be null if roleCode is USER or PLATFORM_ADMIN.",
                                        "type": "string",
                                        "format": "uuid",
                                        "example": "8c3d5e1f-2a4b-5c6d-7e8f-9a0b1c2d3e4f",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Role assigned successfully (newly created)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Rol asignado exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "7b5a4c3d-9e8f-1a2b-3c4d-5e6f7a8b9c0d"
                                                },
                                                "roleCode": {
                                                    "type": "string",
                                                    "example": "AGENT"
                                                },
                                                "roleName": {
                                                    "type": "string",
                                                    "example": "Agent"
                                                },
                                                "company": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "string",
                                                            "format": "uuid",
                                                            "example": "8c3d5e1f-2a4b-5c6d-7e8f-9a0b1c2d3e4f"
                                                        },
                                                        "name": {
                                                            "type": "string",
                                                            "example": "Acme Corporation"
                                                        },
                                                        "logoUrl": {
                                                            "type": "string",
                                                            "example": "https://example.com/logos/acme.png",
                                                            "nullable": true
                                                        }
                                                    },
                                                    "type": "object",
                                                    "nullable": true
                                                },
                                                "isActive": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "assignedAt": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-11-01T14:30:00Z"
                                                },
                                                "assignedBy": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "string",
                                                            "format": "uuid",
                                                            "example": "6a4b3c2d-8e7f-9a0b-1c2d-3e4f5a6b7c8d"
                                                        },
                                                        "userCode": {
                                                            "type": "string",
                                                            "example": "USR-20250001"
                                                        },
                                                        "email": {
                                                            "type": "string",
                                                            "example": "admin@example.com"
                                                        }
                                                    },
                                                    "type": "object",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "Role reactivated successfully (was previously inactive)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Rol reactivado exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "roleCode": {
                                                    "type": "string"
                                                },
                                                "roleName": {
                                                    "type": "string"
                                                },
                                                "company": {
                                                    "type": "object",
                                                    "nullable": true
                                                },
                                                "isActive": {
                                                    "type": "boolean"
                                                },
                                                "assignedAt": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "assignedBy": {
                                                    "type": "object",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation failed"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    },
                    "404": {
                        "description": "User not found"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/roles/{roleId}": {
            "delete": {
                "tags": [
                    "Roles"
                ],
                "summary": "Remove a role from a user",
                "description": "Deactivate a role assignment (soft delete). Only PLATFORM_ADMIN or COMPANY_ADMIN can remove roles. COMPANY_ADMIN can only remove roles from their own company",
                "operationId": "remove_role_from_user",
                "parameters": [
                    {
                        "name": "roleId",
                        "in": "path",
                        "description": "UserRole UUID (not Role UUID) - the ID of the role assignment to remove",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "example": "7b5a4c3d-9e8f-1a2b-3c4d-5e6f7a8b9c0d"
                    },
                    {
                        "name": "reason",
                        "in": "query",
                        "description": "Optional reason for removal (max 500 characters)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "maxLength": 500
                        },
                        "example": "User changed departments"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Role removed successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    },
                    "404": {
                        "description": "Role assignment not found"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/me": {
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "Get authenticated user information",
                "description": "Returns complete user info with profile, roleContexts, and statistics",
                "operationId": "get_current_user",
                "responses": {
                    "200": {
                        "description": "User information retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "userCode": {
                                                    "type": "string"
                                                },
                                                "email": {
                                                    "type": "string",
                                                    "format": "email"
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "enum": [
                                                        "ACTIVE",
                                                        "SUSPENDED",
                                                        "DELETED"
                                                    ],
                                                    "example": "ACTIVE"
                                                },
                                                "emailVerified": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "authProvider": {
                                                    "type": "string",
                                                    "example": "google",
                                                    "nullable": true
                                                },
                                                "profile": {
                                                    "description": "ProfileResource with 12 fields",
                                                    "type": "object"
                                                },
                                                "roleContexts": {
                                                    "description": "Array of role contexts",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "ticketsCount": {
                                                    "type": "integer",
                                                    "example": 42
                                                },
                                                "resolvedTicketsCount": {
                                                    "type": "integer",
                                                    "example": 38
                                                },
                                                "averageRating": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "example": 4.5,
                                                    "nullable": true
                                                },
                                                "lastLoginAt": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "nullable": true
                                                },
                                                "lastActivityAt": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "nullable": true
                                                },
                                                "createdAt": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "updatedAt": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users": {
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "List users with filters and pagination",
                "description": "Returns paginated list of users with optional filters. PLATFORM_ADMIN sees all users, COMPANY_ADMIN sees only users from their company",
                "operationId": "list_users",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Search by email, user_code, or profile name",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Filter by status",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "active",
                                "suspended",
                                "deleted"
                            ]
                        }
                    },
                    {
                        "name": "emailVerified",
                        "in": "query",
                        "description": "Filter by email verification",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "role",
                        "in": "query",
                        "description": "Filter by role",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "USER",
                                "AGENT",
                                "COMPANY_ADMIN",
                                "PLATFORM_ADMIN"
                            ]
                        }
                    },
                    {
                        "name": "companyId",
                        "in": "query",
                        "description": "Filter by company UUID",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    },
                    {
                        "name": "recentActivity",
                        "in": "query",
                        "description": "Filter users active in last 7 days",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "createdAfter",
                        "in": "query",
                        "description": "Filter users created after datetime",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "createdBefore",
                        "in": "query",
                        "description": "Filter users created before datetime",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "order_by",
                        "in": "query",
                        "description": "Order by field",
                        "schema": {
                            "type": "string",
                            "default": "created_at",
                            "enum": [
                                "created_at",
                                "updated_at",
                                "email",
                                "status",
                                "last_login_at",
                                "last_activity_at"
                            ]
                        }
                    },
                    {
                        "name": "order_direction",
                        "in": "query",
                        "description": "Order direction",
                        "schema": {
                            "type": "string",
                            "default": "desc",
                            "enum": [
                                "asc",
                                "desc"
                            ]
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number",
                        "schema": {
                            "type": "integer",
                            "default": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Items per page (max 50)",
                        "schema": {
                            "type": "integer",
                            "default": 15
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Users list retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "description": "Array of UserResource objects (15 fields each)",
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "meta": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer",
                                                    "example": 156
                                                },
                                                "per_page": {
                                                    "type": "integer",
                                                    "example": 15
                                                },
                                                "current_page": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "last_page": {
                                                    "type": "integer",
                                                    "example": 11
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "links": {
                                            "properties": {
                                                "first": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "last": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "prev": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "next": {
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/{id}": {
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "Get specific user by ID",
                "description": "Returns complete user information. PLATFORM_ADMIN can view any user, COMPANY_ADMIN can view users from their company only, any user can view themselves",
                "operationId": "show_user",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "User UUID",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "description": "UserResource with 15 fields",
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    },
                    "404": {
                        "description": "User not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Users"
                ],
                "summary": "Delete user (soft delete)",
                "description": "Soft delete a user (sets status to deleted and deleted_at timestamp). Only PLATFORM_ADMIN can perform this action. User cannot delete themselves",
                "operationId": "delete_user",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "User UUID",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    },
                    {
                        "name": "reason",
                        "in": "query",
                        "description": "Optional deletion reason",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Only platform administrators can delete users"
                    },
                    "404": {
                        "description": "User not found"
                    },
                    "422": {
                        "description": "Cannot delete self"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/{id}/status": {
            "put": {
                "tags": [
                    "Users"
                ],
                "summary": "Update user status",
                "description": "Suspend or activate a user. Only PLATFORM_ADMIN can perform this action",
                "operationId": "update_user_status",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "User UUID",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "status"
                                ],
                                "properties": {
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "active",
                                            "suspended"
                                        ]
                                    },
                                    "reason": {
                                        "description": "Required when status is suspended",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "User status updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "userId": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "status": {
                                                    "type": "string"
                                                },
                                                "updatedAt": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Only platform administrators can update user status"
                    },
                    "404": {
                        "description": "User not found"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        }
    },
    "tags": [
        {
            "name": "Authentication",
            "description": "Authentication"
        },
        {
            "name": "Email Verification",
            "description": "Email Verification"
        },
        {
            "name": "Health",
            "description": "Health"
        },
        {
            "name": "Onboarding",
            "description": "Onboarding"
        },
        {
            "name": "Password Reset",
            "description": "Password Reset"
        },
        {
            "name": "Sessions",
            "description": "Sessions"
        },
        {
            "name": "Companies",
            "description": "Companies"
        },
        {
            "name": "Company Followers",
            "description": "Company Followers"
        },
        {
            "name": "Company Industries",
            "description": "Company Industries"
        },
        {
            "name": "Company Requests - Admin",
            "description": "Company Requests - Admin"
        },
        {
            "name": "Company Requests",
            "description": "Company Requests"
        },
        {
            "name": "User Profile",
            "description": "User Profile"
        },
        {
            "name": "Roles",
            "description": "Roles"
        },
        {
            "name": "Users",
            "description": "Users"
        }
    ],
    "components": {
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "description": "JWT Bearer Token. Include in Authorization header: Bearer <token>",
                "scheme": "bearer",
                "bearerFormat": "JWT"
            }
        }
    }
}
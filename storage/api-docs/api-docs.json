{
    "openapi": "3.0.0",
    "info": {
        "title": "Helpdesk API - REST",
        "description": "API REST del Sistema Helpdesk. Migración de GraphQL a REST con autenticación JWT.",
        "contact": {
            "name": "API Support",
            "email": "support@helpdesk.local"
        },
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "http://localhost:8000",
            "description": "Development Server"
        }
    ],
    "paths": {
        "/api/auth/register": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Register a new user",
                "description": "Create a new user account and return authentication tokens",
                "operationId": "021e877864f2b053f14af19f4fce5dd7",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "password",
                                    "passwordConfirmation",
                                    "firstName",
                                    "lastName",
                                    "acceptsTerms",
                                    "acceptsPrivacyPolicy"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "minLength": 8
                                    },
                                    "passwordConfirmation": {
                                        "type": "string",
                                        "format": "password"
                                    },
                                    "firstName": {
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "lastName": {
                                        "type": "string",
                                        "maxLength": 255
                                    },
                                    "acceptsTerms": {
                                        "type": "boolean"
                                    },
                                    "acceptsPrivacyPolicy": {
                                        "type": "boolean"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "User created successfully"
                    },
                    "422": {
                        "description": "Validation error"
                    },
                    "409": {
                        "description": "Email already exists"
                    }
                }
            }
        },
        "/api/auth/login": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Login user",
                "description": "Authenticate user with email and password",
                "operationId": "7571e1edb2e53d940f2029c7829e720d",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "password"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password"
                                    },
                                    "deviceName": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "rememberMe": {
                                        "type": "boolean",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Login successful"
                    },
                    "422": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Invalid credentials"
                    }
                }
            }
        },
        "/api/auth/login/google": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Login with Google",
                "description": "Authenticate user using Google ID token",
                "operationId": "09fd714107f3ee9528c85d31498e16ab",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "googleToken"
                                ],
                                "properties": {
                                    "googleToken": {
                                        "description": "Google ID token",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Login successful"
                    },
                    "422": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Invalid token"
                    }
                }
            }
        },
        "/api/auth/status": {
            "get": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Get authentication status",
                "description": "Get current authenticated user status and session information",
                "operationId": "8a24b7b2f49b7e0cb087a5b10704059b",
                "responses": {
                    "200": {
                        "description": "Authentication status retrieved"
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/email/verify": {
            "post": {
                "tags": [
                    "Email Verification"
                ],
                "summary": "Verify email",
                "description": "Verify user email with token. Always returns 200.",
                "operationId": "077140d57b4d70ffd89a68e5a5899364",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "token"
                                ],
                                "properties": {
                                    "token": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Verification result (check success field)"
                    }
                }
            }
        },
        "/api/auth/email/verify/resend": {
            "post": {
                "tags": [
                    "Email Verification"
                ],
                "summary": "Resend verification email",
                "description": "Resend verification email to authenticated user (rate limited: 3 per 5 minutes)",
                "operationId": "68696da7a70f3e6377685eab5496aa04",
                "responses": {
                    "200": {
                        "description": "Email resent"
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    }
                }
            }
        },
        "/api/auth/email/status": {
            "get": {
                "tags": [
                    "Email Verification"
                ],
                "summary": "Get email verification status",
                "description": "Get email verification status for authenticated user",
                "operationId": "f9d76d9ffd5f5b4d7f72eee0ba75f695",
                "responses": {
                    "200": {
                        "description": "Status retrieved"
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                }
            }
        },
        "/api/health": {
            "get": {
                "tags": [
                    "Health"
                ],
                "summary": "Health check",
                "description": "Verifica el estado de la API",
                "operationId": "1c4061d7fcb253d4c29c0060f524b139",
                "responses": {
                    "200": {
                        "description": "API está funcionando"
                    }
                }
            }
        },
        "/api/auth/onboarding/completed": {
            "post": {
                "tags": [
                    "Onboarding"
                ],
                "summary": "Mark onboarding as completed",
                "description": "Mark onboarding process as completed for authenticated user",
                "operationId": "d7efab01fa98353947198030b8eb5e4d",
                "responses": {
                    "200": {
                        "description": "Onboarding marked as completed"
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                }
            }
        },
        "/api/auth/password-reset": {
            "post": {
                "tags": [
                    "Password Reset"
                ],
                "summary": "Request password reset",
                "description": "Request a password reset. Always returns success for security.",
                "operationId": "67699b55b6b45dc8a8f476a6a079595b",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Reset requested (always success)"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                }
            }
        },
        "/api/auth/password-reset/confirm": {
            "post": {
                "tags": [
                    "Password Reset"
                ],
                "summary": "Confirm password reset",
                "description": "Confirm password reset with new password and token/code",
                "operationId": "4f87e9e00e2080d94b31eb313af97f9c",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "password",
                                    "passwordConfirmation"
                                ],
                                "properties": {
                                    "token": {
                                        "description": "Reset token (32 chars)",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "code": {
                                        "description": "Reset code (6 digits)",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "minLength": 8
                                    },
                                    "passwordConfirmation": {
                                        "type": "string",
                                        "format": "password"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Password reset successfully"
                    },
                    "422": {
                        "description": "Validation error"
                    },
                    "404": {
                        "description": "Invalid token/code"
                    },
                    "401": {
                        "description": "Token expired"
                    }
                }
            }
        },
        "/api/auth/password-reset/status": {
            "get": {
                "tags": [
                    "Password Reset"
                ],
                "summary": "Get password reset status",
                "description": "Validate password reset token and return its status",
                "operationId": "ff2ace448696392eb45ebde2e5e43915",
                "parameters": [
                    {
                        "name": "token",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "description": "Reset token",
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Token status retrieved"
                    },
                    "404": {
                        "description": "Token not found"
                    },
                    "410": {
                        "description": "Token expired"
                    }
                }
            }
        },
        "/api/auth/refresh": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Refresh access token",
                "description": "Get a new access token using refresh token from cookie or header. For Swagger testing, use header X-Refresh-Token with the refresh token value.",
                "operationId": "3c243abb35865fca479a53debfe9abae",
                "parameters": [
                    {
                        "name": "X-Refresh-Token",
                        "in": "header",
                        "description": "Refresh token (for testing in Swagger). If not provided, uses refresh_token from HttpOnly cookie.",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "refreshToken": {
                                        "description": "Refresh token (alternative method, not recommended)",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Token refreshed successfully. New refresh token in Set-Cookie header."
                    },
                    "401": {
                        "description": "Invalid or missing refresh token"
                    }
                }
            }
        },
        "/api/auth/sessions": {
            "get": {
                "tags": [
                    "Sessions"
                ],
                "summary": "List user sessions",
                "description": "Get all active sessions for authenticated user",
                "operationId": "9c723308a97b1e896f71b03ef5541c5a",
                "responses": {
                    "200": {
                        "description": "Sessions retrieved"
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/logout": {
            "post": {
                "tags": [
                    "Sessions"
                ],
                "summary": "Logout user",
                "description": "Logout from current session or all sessions",
                "operationId": "b471d4a100ddd7d6def4d28f7f51b1e1",
                "requestBody": {
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "everywhere": {
                                        "description": "Logout from all sessions",
                                        "type": "boolean",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Logout successful"
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/sessions/{sessionId}": {
            "delete": {
                "tags": [
                    "Sessions"
                ],
                "summary": "Revoke a session",
                "description": "Revoke a specific session from another device",
                "operationId": "f80106f8794ae1d6b079027b9d102edb",
                "parameters": [
                    {
                        "name": "sessionId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Session revoked"
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "403": {
                        "description": "Not authorized"
                    },
                    "404": {
                        "description": "Session not found"
                    },
                    "409": {
                        "description": "Cannot revoke current session"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/companies/minimal": {
            "get": {
                "tags": [
                    "Companies"
                ],
                "summary": "Lista mínima de empresas para selectores",
                "description": "Retorna un listado paginado de empresas activas con información mínima (id, código, nombre, logo). Endpoint público sin autenticación.",
                "operationId": "list_companies_minimal",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Filtrar empresas por nombre (búsqueda case-insensitive)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "Acme"
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Número de items por página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 50
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Listado de empresas minimalistas con paginación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid",
                                                        "example": "550e8400-e29b-41d4-a716-446655440000"
                                                    },
                                                    "company_code": {
                                                        "type": "string",
                                                        "example": "CMP-2025-00001"
                                                    },
                                                    "name": {
                                                        "type": "string",
                                                        "example": "Acme Corporation"
                                                    },
                                                    "logo_url": {
                                                        "type": "string",
                                                        "example": "https://example.com/logo.png",
                                                        "nullable": true
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "meta": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer",
                                                    "example": 150
                                                },
                                                "current_page": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "last_page": {
                                                    "type": "integer",
                                                    "example": 3
                                                },
                                                "per_page": {
                                                    "type": "integer",
                                                    "example": 50
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "links": {
                                            "properties": {
                                                "first": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "last": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "prev": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "next": {
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/companies/explore": {
            "get": {
                "tags": [
                    "Companies"
                ],
                "summary": "Explorar empresas con filtros",
                "description": "Retorna listado paginado de empresas con información extendida para exploración. Incluye indicadores de seguimiento del usuario autenticado. Requiere autenticación JWT.",
                "operationId": "explore_companies",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Buscar empresas por nombre",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "Tech"
                        }
                    },
                    {
                        "name": "country",
                        "in": "query",
                        "description": "Filtrar por país",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "Chile"
                        }
                    },
                    {
                        "name": "followed_by_me",
                        "in": "query",
                        "description": "Mostrar solo empresas seguidas por el usuario",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    },
                    {
                        "name": "sort_by",
                        "in": "query",
                        "description": "Campo para ordenar resultados",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "name"
                        }
                    },
                    {
                        "name": "sort_direction",
                        "in": "query",
                        "description": "Dirección del ordenamiento",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "asc",
                                "desc"
                            ],
                            "example": "asc"
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Número de items por página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 20
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Listado de empresas con información extendida",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid"
                                                    },
                                                    "company_code": {
                                                        "type": "string"
                                                    },
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "logo_url": {
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "website": {
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "contact_country": {
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "followers_count": {
                                                        "type": "integer"
                                                    },
                                                    "is_followed_by_me": {
                                                        "type": "boolean"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "meta": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "links": {
                                            "properties": {
                                                "first": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "last": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "prev": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "next": {
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado (token JWT inválido o ausente)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/companies": {
            "get": {
                "tags": [
                    "Companies"
                ],
                "summary": "Listar todas las empresas (admin)",
                "description": "Retorna listado completo de empresas con toda la información y campos calculados. Requiere rol HELPDESK_ADMIN o COMPANY_ADMIN. Los COMPANY_ADMIN solo ven su propia empresa.",
                "operationId": "list_companies",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Buscar empresas por nombre",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "Tech"
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Filtrar por estado de la empresa",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "active",
                                "suspended",
                                "inactive"
                            ],
                            "example": "active"
                        }
                    },
                    {
                        "name": "sort_by",
                        "in": "query",
                        "description": "Campo para ordenar resultados",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "example": "created_at"
                        }
                    },
                    {
                        "name": "sort_direction",
                        "in": "query",
                        "description": "Dirección del ordenamiento",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "asc",
                                "desc"
                            ],
                            "example": "desc"
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Número de items por página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 20
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Listado completo de empresas con información administrativa",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid"
                                                    },
                                                    "company_code": {
                                                        "type": "string"
                                                    },
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "status": {
                                                        "type": "string",
                                                        "enum": [
                                                            "active",
                                                            "suspended",
                                                            "inactive"
                                                        ]
                                                    },
                                                    "admin": {
                                                        "type": "object"
                                                    },
                                                    "followers_count": {
                                                        "type": "integer"
                                                    },
                                                    "active_agents_count": {
                                                        "type": "integer"
                                                    },
                                                    "total_users_count": {
                                                        "type": "integer"
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "meta": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "links": {
                                            "properties": {
                                                "first": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "last": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "prev": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "next": {
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado (token JWT inválido o ausente)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos (requiere rol de administrador)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Forbidden."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Companies"
                ],
                "summary": "Crear nueva empresa",
                "description": "Crea una nueva empresa directamente sin proceso de solicitud. Solo disponible para usuarios con rol PLATFORM_ADMIN. Asigna automáticamente el rol COMPANY_ADMIN al usuario designado como administrador.",
                "operationId": "create_company",
                "requestBody": {
                    "description": "Datos de la nueva empresa",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "legal_name",
                                    "support_email",
                                    "admin_user_id"
                                ],
                                "properties": {
                                    "name": {
                                        "description": "Nombre comercial de la empresa",
                                        "type": "string",
                                        "example": "Acme Corporation"
                                    },
                                    "legal_name": {
                                        "description": "Razón social legal",
                                        "type": "string",
                                        "example": "Acme Corp S.A."
                                    },
                                    "support_email": {
                                        "description": "Email de soporte",
                                        "type": "string",
                                        "format": "email",
                                        "example": "support@acme.com"
                                    },
                                    "phone": {
                                        "description": "Teléfono de contacto",
                                        "type": "string",
                                        "example": "+56912345678",
                                        "nullable": true
                                    },
                                    "website": {
                                        "description": "Sitio web",
                                        "type": "string",
                                        "example": "https://acme.com",
                                        "nullable": true
                                    },
                                    "admin_user_id": {
                                        "description": "ID del usuario que será administrador de la empresa",
                                        "type": "string",
                                        "format": "uuid"
                                    },
                                    "contact_address": {
                                        "description": "Dirección física",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "contact_city": {
                                        "description": "Ciudad",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "contact_state": {
                                        "description": "Estado/Región",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "contact_country": {
                                        "description": "País",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "contact_postal_code": {
                                        "description": "Código postal",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "tax_id": {
                                        "description": "RUT/NIT/Tax ID",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "legal_representative": {
                                        "description": "Representante legal",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "business_hours": {
                                        "description": "Horario de atención (JSONB)",
                                        "type": "object",
                                        "nullable": true
                                    },
                                    "timezone": {
                                        "description": "Zona horaria",
                                        "type": "string",
                                        "example": "America/Santiago",
                                        "nullable": true
                                    },
                                    "settings": {
                                        "description": "Configuraciones adicionales (JSONB)",
                                        "type": "object",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Empresa creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "string",
                                            "format": "uuid"
                                        },
                                        "company_code": {
                                            "type": "string"
                                        },
                                        "name": {
                                            "type": "string"
                                        },
                                        "status": {
                                            "type": "string",
                                            "example": "active"
                                        },
                                        "admin": {
                                            "type": "object"
                                        },
                                        "created_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos (requiere rol PLATFORM_ADMIN)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Forbidden."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/companies/{company}": {
            "get": {
                "tags": [
                    "Companies"
                ],
                "summary": "Ver detalle completo de una empresa",
                "description": "Retorna toda la información de una empresa específica incluyendo campos calculados, admin info y estado de seguimiento del usuario. Requiere autenticación y permisos de acceso.",
                "operationId": "show_company",
                "parameters": [
                    {
                        "name": "company",
                        "in": "path",
                        "description": "ID o UUID de la empresa",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Detalle completo de la empresa",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "string",
                                            "format": "uuid"
                                        },
                                        "company_code": {
                                            "type": "string"
                                        },
                                        "name": {
                                            "type": "string"
                                        },
                                        "legal_name": {
                                            "type": "string",
                                            "nullable": true
                                        },
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "active",
                                                "suspended",
                                                "inactive"
                                            ]
                                        },
                                        "support_email": {
                                            "type": "string",
                                            "format": "email"
                                        },
                                        "phone": {
                                            "type": "string",
                                            "nullable": true
                                        },
                                        "website": {
                                            "type": "string",
                                            "nullable": true
                                        },
                                        "logo_url": {
                                            "type": "string",
                                            "nullable": true
                                        },
                                        "admin": {
                                            "type": "object"
                                        },
                                        "followers_count": {
                                            "type": "integer"
                                        },
                                        "active_agents_count": {
                                            "type": "integer"
                                        },
                                        "total_users_count": {
                                            "type": "integer"
                                        },
                                        "is_followed_by_me": {
                                            "type": "boolean"
                                        },
                                        "created_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "updated_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado (token JWT inválido o ausente)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos para ver esta empresa",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Forbidden."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Empresa no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Company not found."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Companies"
                ],
                "summary": "Actualizar empresa",
                "description": "Actualiza la información de una empresa existente. Requiere ser PLATFORM_ADMIN o COMPANY_ADMIN propietario de la empresa. Todos los campos son opcionales.",
                "operationId": "update_company",
                "parameters": [
                    {
                        "name": "company",
                        "in": "path",
                        "description": "ID o UUID de la empresa a actualizar",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "example": "550e8400-e29b-41d4-a716-446655440000"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Datos a actualizar (todos los campos son opcionales)",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "description": "Nombre comercial",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "legal_name": {
                                        "description": "Razón social",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "support_email": {
                                        "description": "Email de soporte",
                                        "type": "string",
                                        "format": "email",
                                        "nullable": true
                                    },
                                    "phone": {
                                        "description": "Teléfono",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "website": {
                                        "description": "Sitio web",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "contact_address": {
                                        "description": "Dirección",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "contact_city": {
                                        "description": "Ciudad",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "contact_state": {
                                        "description": "Estado/Región",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "contact_country": {
                                        "description": "País",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "contact_postal_code": {
                                        "description": "Código postal",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "tax_id": {
                                        "description": "RUT/NIT/Tax ID",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "legal_representative": {
                                        "description": "Representante legal",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "business_hours": {
                                        "description": "Horario de atención",
                                        "type": "object",
                                        "nullable": true
                                    },
                                    "timezone": {
                                        "description": "Zona horaria",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "logo_url": {
                                        "description": "URL del logo",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "favicon_url": {
                                        "description": "URL del favicon",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "primary_color": {
                                        "description": "Color primario (hex)",
                                        "type": "string",
                                        "example": "#FF5733",
                                        "nullable": true
                                    },
                                    "secondary_color": {
                                        "description": "Color secundario (hex)",
                                        "type": "string",
                                        "example": "#33FF57",
                                        "nullable": true
                                    },
                                    "settings": {
                                        "description": "Configuraciones adicionales",
                                        "type": "object",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Empresa actualizada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "string",
                                            "format": "uuid"
                                        },
                                        "company_code": {
                                            "type": "string"
                                        },
                                        "name": {
                                            "type": "string"
                                        },
                                        "status": {
                                            "type": "string"
                                        },
                                        "admin": {
                                            "type": "object"
                                        },
                                        "followers_count": {
                                            "type": "integer"
                                        },
                                        "active_agents_count": {
                                            "type": "integer"
                                        },
                                        "total_users_count": {
                                            "type": "integer"
                                        },
                                        "is_followed_by_me": {
                                            "type": "boolean"
                                        },
                                        "updated_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos para actualizar esta empresa",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Forbidden."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Empresa no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Company not found."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/companies/followed": {
            "get": {
                "tags": [
                    "Company Followers"
                ],
                "summary": "List companies followed by user",
                "description": "Returns all companies that the authenticated user is following, ordered by most recent follow first. Includes company details and user-specific metrics like ticket count.",
                "operationId": "list_followed_companies",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number for pagination",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Number of items per page",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "maximum": 100,
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of companies followed by the authenticated user",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid"
                                                    },
                                                    "company": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "string",
                                                                "format": "uuid"
                                                            },
                                                            "company_code": {
                                                                "type": "string"
                                                            },
                                                            "name": {
                                                                "type": "string"
                                                            },
                                                            "logo_url": {
                                                                "type": "string",
                                                                "format": "uri",
                                                                "nullable": true
                                                            },
                                                            "status": {
                                                                "type": "string"
                                                            }
                                                        },
                                                        "type": "object"
                                                    },
                                                    "followed_at": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    },
                                                    "my_tickets_count": {
                                                        "type": "integer"
                                                    },
                                                    "last_ticket_created_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "nullable": true
                                                    },
                                                    "has_unread_announcements": {
                                                        "type": "boolean"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/companies/{company}/is-following": {
            "get": {
                "tags": [
                    "Company Followers"
                ],
                "summary": "Check if user follows a company",
                "description": "Verifies if the authenticated user is currently following the specified company.",
                "operationId": "check_if_following",
                "parameters": [
                    {
                        "name": "company",
                        "in": "path",
                        "description": "Company UUID or identifier",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Follow status retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "data": {
                                            "properties": {
                                                "isFollowing": {
                                                    "type": "boolean"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "404": {
                        "description": "Company not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/companies/{company}/follow": {
            "post": {
                "tags": [
                    "Company Followers"
                ],
                "summary": "Follow a company",
                "description": "Allows the authenticated user to start following a company. If already following, returns current follow status. Rate limited to 20 requests per hour.",
                "operationId": "follow_company",
                "parameters": [
                    {
                        "name": "company",
                        "in": "path",
                        "description": "Company UUID or identifier",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Already following the company",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        },
                                        "company": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "company_code": {
                                                    "type": "string"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "logo_url": {
                                                    "type": "string",
                                                    "format": "uri",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "followed_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "isFollowing": {
                                            "type": "boolean"
                                        },
                                        "followersCount": {
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "201": {
                        "description": "Successfully started following the company",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        },
                                        "company": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "company_code": {
                                                    "type": "string"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "logo_url": {
                                                    "type": "string",
                                                    "format": "uri",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "followed_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "isFollowing": {
                                            "type": "boolean"
                                        },
                                        "followersCount": {
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "404": {
                        "description": "Company not found"
                    },
                    "409": {
                        "description": "Already following this company"
                    },
                    "429": {
                        "description": "Too many follow requests (rate limit exceeded)"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/companies/{company}/unfollow": {
            "delete": {
                "tags": [
                    "Company Followers"
                ],
                "summary": "Unfollow a company",
                "description": "Allows the authenticated user to stop following a company. Returns an error if the user is not currently following the company.",
                "operationId": "unfollow_company",
                "parameters": [
                    {
                        "name": "company",
                        "in": "path",
                        "description": "Company UUID or identifier",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully unfollowed the company",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        },
                                        "isFollowing": {
                                            "type": "boolean"
                                        },
                                        "followersCount": {
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "404": {
                        "description": "Company not found"
                    },
                    "409": {
                        "description": "User is not following this company"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/company-requests/{companyRequest}/approve": {
            "post": {
                "tags": [
                    "Company Requests - Admin"
                ],
                "summary": "Aprobar solicitud de empresa",
                "description": "Aprueba una solicitud de empresa. Automáticamente: crea la empresa, crea usuario admin, asigna rol COMPANY_ADMIN, genera contraseña temporal (válida 7 días), envía email con credenciales",
                "operationId": "approve_company_request",
                "parameters": [
                    {
                        "name": "companyRequest",
                        "in": "path",
                        "description": "UUID de la solicitud de empresa",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "notes": {
                                        "description": "Observaciones adicionales",
                                        "type": "string",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Solicitud aprobada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "string",
                                            "format": "uuid"
                                        },
                                        "status": {
                                            "type": "string",
                                            "example": "APPROVED"
                                        },
                                        "company": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "name": {
                                                    "type": "string"
                                                },
                                                "companyCode": {
                                                    "type": "string"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "adminUser": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "email": {
                                                    "type": "string",
                                                    "format": "email"
                                                },
                                                "temporaryPassword": {
                                                    "description": "Contraseña temporal (solo si es usuario nuevo)",
                                                    "type": "string"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "approvedAt": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos - requiere rol PLATFORM_ADMIN",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "This action is unauthorized"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Solicitud no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Company request not found"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Solicitud ya procesada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Company request already processed"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid"
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/company-requests/{companyRequest}/reject": {
            "post": {
                "tags": [
                    "Company Requests - Admin"
                ],
                "summary": "Rechazar solicitud de empresa",
                "description": "Rechaza una solicitud de empresa. Automáticamente: marca como REJECTED, envía email al solicitante con motivo del rechazo",
                "operationId": "reject_company_request",
                "parameters": [
                    {
                        "name": "companyRequest",
                        "in": "path",
                        "description": "UUID de la solicitud de empresa",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "reason"
                                ],
                                "properties": {
                                    "reason": {
                                        "description": "Motivo del rechazo (requerido)",
                                        "type": "string"
                                    },
                                    "notes": {
                                        "description": "Observaciones adicionales",
                                        "type": "string",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Solicitud rechazada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "string",
                                            "format": "uuid"
                                        },
                                        "status": {
                                            "type": "string",
                                            "example": "REJECTED"
                                        },
                                        "rejectedAt": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "reason": {
                                            "description": "Motivo del rechazo",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos - requiere rol PLATFORM_ADMIN",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "This action is unauthorized"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Solicitud no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Company request not found"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Solicitud ya procesada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Company request already processed"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid"
                                        },
                                        "errors": {
                                            "type": "object",
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/company-requests": {
            "get": {
                "tags": [
                    "Company Requests"
                ],
                "summary": "Listar solicitudes de empresas",
                "description": "Retorna lista paginada de solicitudes de empresas. Requiere rol PLATFORM_ADMIN. Incluye eager loading de reviewer y createdCompany.",
                "operationId": "list_company_requests",
                "parameters": [
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Filtrar por estado de la solicitud",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "PENDING",
                                "APPROVED",
                                "REJECTED"
                            ]
                        }
                    },
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Buscar por nombre de empresa",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "sort",
                        "in": "query",
                        "description": "Campo para ordenar",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "order",
                        "in": "query",
                        "description": "Dirección de ordenamiento",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "asc",
                                "desc"
                            ]
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Número de página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de solicitudes de empresas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid"
                                                    },
                                                    "requestCode": {
                                                        "type": "string"
                                                    },
                                                    "companyName": {
                                                        "type": "string"
                                                    },
                                                    "legalName": {
                                                        "type": "string",
                                                        "nullable": true
                                                    },
                                                    "adminEmail": {
                                                        "type": "string",
                                                        "format": "email"
                                                    },
                                                    "status": {
                                                        "type": "string",
                                                        "enum": [
                                                            "PENDING",
                                                            "APPROVED",
                                                            "REJECTED"
                                                        ]
                                                    },
                                                    "createdAt": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "meta": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "links": {
                                            "properties": {
                                                "first": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "last": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "prev": {
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "next": {
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Sin autenticación"
                    },
                    "403": {
                        "description": "Sin permisos - requiere rol PLATFORM_ADMIN"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Company Requests"
                ],
                "summary": "Crear solicitud de empresa",
                "description": "Endpoint público para crear solicitud de nueva empresa. Rate limit: 3 solicitudes por hora. Validación automática de email duplicado en solicitudes pendientes.",
                "operationId": "create_company_request",
                "requestBody": {
                    "description": "Datos de la solicitud de empresa",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "company_name",
                                    "admin_email",
                                    "business_description",
                                    "industry_type"
                                ],
                                "properties": {
                                    "company_name": {
                                        "description": "Nombre de la empresa",
                                        "type": "string",
                                        "maxLength": 200,
                                        "minLength": 2
                                    },
                                    "legal_name": {
                                        "description": "Nombre legal de la empresa",
                                        "type": "string",
                                        "maxLength": 200,
                                        "minLength": 2,
                                        "nullable": true
                                    },
                                    "admin_email": {
                                        "description": "Email del administrador",
                                        "type": "string",
                                        "format": "email",
                                        "maxLength": 255
                                    },
                                    "business_description": {
                                        "description": "Descripción del negocio",
                                        "type": "string",
                                        "maxLength": 2000,
                                        "minLength": 50
                                    },
                                    "website": {
                                        "description": "Sitio web de la empresa",
                                        "type": "string",
                                        "format": "uri",
                                        "maxLength": 255,
                                        "nullable": true
                                    },
                                    "industry_type": {
                                        "description": "Tipo de industria",
                                        "type": "string",
                                        "maxLength": 100
                                    },
                                    "estimated_users": {
                                        "description": "Número estimado de usuarios",
                                        "type": "integer",
                                        "maximum": 10000,
                                        "minimum": 1,
                                        "nullable": true
                                    },
                                    "contact_address": {
                                        "description": "Dirección de contacto",
                                        "type": "string",
                                        "maxLength": 255,
                                        "nullable": true
                                    },
                                    "contact_city": {
                                        "description": "Ciudad",
                                        "type": "string",
                                        "maxLength": 100,
                                        "nullable": true
                                    },
                                    "contact_country": {
                                        "description": "País",
                                        "type": "string",
                                        "maxLength": 100,
                                        "nullable": true
                                    },
                                    "contact_postal_code": {
                                        "description": "Código postal",
                                        "type": "string",
                                        "maxLength": 20,
                                        "nullable": true
                                    },
                                    "tax_id": {
                                        "description": "Identificador fiscal",
                                        "type": "string",
                                        "maxLength": 50,
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Solicitud de empresa creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "string",
                                            "format": "uuid"
                                        },
                                        "requestCode": {
                                            "type": "string"
                                        },
                                        "companyName": {
                                            "type": "string"
                                        },
                                        "adminEmail": {
                                            "type": "string",
                                            "format": "email"
                                        },
                                        "status": {
                                            "type": "string",
                                            "enum": [
                                                "PENDING"
                                            ]
                                        },
                                        "createdAt": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación - datos inválidos o email duplicado"
                    },
                    "429": {
                        "description": "Rate limit excedido - máximo 3 solicitudes por hora"
                    }
                }
            }
        },
        "/api/users/me/profile": {
            "get": {
                "tags": [
                    "User Profile"
                ],
                "summary": "Get authenticated user profile",
                "description": "Retrieve the complete profile information of the currently authenticated user",
                "operationId": "get_my_profile",
                "responses": {
                    "200": {
                        "description": "Profile retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "firstName": {
                                                    "description": "User first name",
                                                    "type": "string"
                                                },
                                                "lastName": {
                                                    "description": "User last name",
                                                    "type": "string"
                                                },
                                                "phoneNumber": {
                                                    "description": "Phone number (E.164 format)",
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "avatarUrl": {
                                                    "description": "Avatar image URL",
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "birthDate": {
                                                    "description": "Birth date",
                                                    "type": "string",
                                                    "format": "date",
                                                    "nullable": true
                                                },
                                                "bio": {
                                                    "description": "Biography",
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "theme": {
                                                    "description": "UI theme preference",
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "language": {
                                                    "description": "Language preference",
                                                    "type": "string",
                                                    "nullable": true
                                                },
                                                "timezone": {
                                                    "description": "Timezone",
                                                    "type": "string",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "User Profile"
                ],
                "summary": "Update authenticated user profile",
                "description": "Update profile information for the currently authenticated user. Throttled: 30 requests/hour. All fields are optional.",
                "operationId": "update_my_profile",
                "requestBody": {
                    "description": "Profile fields to update. All fields are optional.",
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "firstName": {
                                        "description": "User first name",
                                        "type": "string",
                                        "maxLength": 255,
                                        "nullable": true
                                    },
                                    "lastName": {
                                        "description": "User last name",
                                        "type": "string",
                                        "maxLength": 255,
                                        "nullable": true
                                    },
                                    "phoneNumber": {
                                        "description": "Phone number (E.164 format)",
                                        "type": "string",
                                        "maxLength": 20,
                                        "nullable": true
                                    },
                                    "avatar": {
                                        "description": "Avatar URL or file path",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "timezone": {
                                        "description": "Timezone identifier",
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "birthDate": {
                                        "description": "Birth date",
                                        "type": "string",
                                        "format": "date",
                                        "nullable": true
                                    },
                                    "bio": {
                                        "description": "User biography",
                                        "type": "string",
                                        "maxLength": 1000,
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Profile updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "userId": {
                                                    "description": "User ID",
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "profile": {
                                                    "description": "Updated profile data",
                                                    "type": "object"
                                                },
                                                "updatedAt": {
                                                    "description": "Last update timestamp",
                                                    "type": "string",
                                                    "format": "date-time"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/me/preferences": {
            "patch": {
                "tags": [
                    "User Profile"
                ],
                "summary": "Update authenticated user preferences",
                "description": "Update preferences for the currently authenticated user. Throttled: 50 requests/hour. All fields are optional.",
                "operationId": "update_my_preferences",
                "requestBody": {
                    "description": "Preference fields to update. All fields are optional.",
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "theme": {
                                        "description": "UI theme preference",
                                        "type": "string",
                                        "enum": [
                                            "light",
                                            "dark"
                                        ],
                                        "nullable": true
                                    },
                                    "language": {
                                        "description": "Language preference (ISO 639-1)",
                                        "type": "string",
                                        "enum": [
                                            "en",
                                            "es",
                                            "fr",
                                            "de"
                                        ],
                                        "nullable": true
                                    },
                                    "pushNotifications": {
                                        "description": "Enable push notifications",
                                        "type": "boolean",
                                        "nullable": true
                                    },
                                    "emailNotifications": {
                                        "description": "Enable email notifications",
                                        "type": "boolean",
                                        "nullable": true
                                    },
                                    "weeklyDigest": {
                                        "description": "Enable weekly digest emails",
                                        "type": "boolean",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Preferences updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "userId": {
                                                    "description": "User ID",
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "preferences": {
                                                    "description": "Updated preferences data",
                                                    "type": "object"
                                                },
                                                "updatedAt": {
                                                    "description": "Last update timestamp",
                                                    "type": "string",
                                                    "format": "date-time"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/roles": {
            "get": {
                "tags": [
                    "Roles"
                ],
                "summary": "Get all available roles",
                "description": "Returns list of all available roles in the system. Only PLATFORM_ADMIN or COMPANY_ADMIN can view roles",
                "operationId": "list_roles",
                "responses": {
                    "200": {
                        "description": "Roles retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "format": "uuid"
                                                    },
                                                    "roleCode": {
                                                        "type": "string",
                                                        "enum": [
                                                            "USER",
                                                            "AGENT",
                                                            "COMPANY_ADMIN",
                                                            "PLATFORM_ADMIN"
                                                        ]
                                                    },
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "description": {
                                                        "type": "string"
                                                    },
                                                    "requiresCompany": {
                                                        "type": "boolean"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/{userId}/roles": {
            "post": {
                "tags": [
                    "Roles"
                ],
                "summary": "Assign a role to a user",
                "description": "Assign a role to a user with optional company context. Only PLATFORM_ADMIN or COMPANY_ADMIN can assign roles. Returns 200 if role was reactivated, 201 if newly assigned. Throttled: 100 requests/hour per authenticated user. Reactivates revoked roles if applicable.",
                "operationId": "assign_role_to_user",
                "parameters": [
                    {
                        "name": "userId",
                        "in": "path",
                        "description": "User UUID",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Role assignment data",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "roleCode"
                                ],
                                "properties": {
                                    "roleCode": {
                                        "description": "Role code to assign",
                                        "type": "string",
                                        "enum": [
                                            "PLATFORM_ADMIN",
                                            "COMPANY_ADMIN",
                                            "AGENT",
                                            "USER"
                                        ]
                                    },
                                    "companyId": {
                                        "description": "Required if roleCode is COMPANY_ADMIN or AGENT",
                                        "type": "string",
                                        "format": "uuid",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Role assigned successfully (newly created)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "Role reactivated successfully (was previously inactive)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation failed"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    },
                    "404": {
                        "description": "User not found"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/roles/{roleId}": {
            "delete": {
                "tags": [
                    "Roles"
                ],
                "summary": "Remove a role from a user",
                "description": "Deactivate a role assignment (soft delete). Only PLATFORM_ADMIN or COMPANY_ADMIN can remove roles. COMPANY_ADMIN can only remove roles from their own company",
                "operationId": "remove_role_from_user",
                "parameters": [
                    {
                        "name": "roleId",
                        "in": "path",
                        "description": "UserRole UUID (not Role UUID)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Optional revocation details",
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "reason": {
                                        "description": "Reason for removal (max 500 chars)",
                                        "type": "string",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Role removed successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    },
                    "404": {
                        "description": "Role assignment not found"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/me": {
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "Get authenticated user information",
                "description": "Returns complete user info with profile, roles, companies, and statistics",
                "operationId": "get_current_user",
                "responses": {
                    "200": {
                        "description": "User information retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "userCode": {
                                                    "type": "string"
                                                },
                                                "email": {
                                                    "type": "string",
                                                    "format": "email"
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "enum": [
                                                        "active",
                                                        "suspended",
                                                        "deleted"
                                                    ]
                                                },
                                                "emailVerified": {
                                                    "type": "boolean"
                                                },
                                                "profile": {
                                                    "type": "object"
                                                },
                                                "roles": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "statistics": {
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users": {
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "List users with filters and pagination",
                "description": "Returns paginated list of users with optional filters. PLATFORM_ADMIN sees all users, COMPANY_ADMIN sees only users from their company",
                "operationId": "list_users",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "description": "Search by email, user_code, or profile name",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Filter by status",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "active",
                                "suspended",
                                "deleted"
                            ]
                        }
                    },
                    {
                        "name": "emailVerified",
                        "in": "query",
                        "description": "Filter by email verification",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "role",
                        "in": "query",
                        "description": "Filter by role",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "USER",
                                "AGENT",
                                "COMPANY_ADMIN",
                                "PLATFORM_ADMIN"
                            ]
                        }
                    },
                    {
                        "name": "companyId",
                        "in": "query",
                        "description": "Filter by company UUID",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    },
                    {
                        "name": "recentActivity",
                        "in": "query",
                        "description": "Filter users active in last 7 days",
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "createdAfter",
                        "in": "query",
                        "description": "Filter users created after datetime",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "createdBefore",
                        "in": "query",
                        "description": "Filter users created before datetime",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "order_by",
                        "in": "query",
                        "description": "Order by field",
                        "schema": {
                            "type": "string",
                            "default": "created_at",
                            "enum": [
                                "created_at",
                                "updated_at",
                                "email",
                                "status",
                                "last_login_at",
                                "last_activity_at"
                            ]
                        }
                    },
                    {
                        "name": "order_direction",
                        "in": "query",
                        "description": "Order direction",
                        "schema": {
                            "type": "string",
                            "default": "desc",
                            "enum": [
                                "asc",
                                "desc"
                            ]
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number",
                        "schema": {
                            "type": "integer",
                            "default": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Items per page (max 50)",
                        "schema": {
                            "type": "integer",
                            "default": 15
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Users list retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "meta": {
                                            "properties": {
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/{id}": {
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "Get specific user by ID",
                "description": "Returns complete user information. PLATFORM_ADMIN can view any user, COMPANY_ADMIN can view users from their company only",
                "operationId": "show_user",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "User UUID",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    },
                    "404": {
                        "description": "User not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Users"
                ],
                "summary": "Delete user (soft delete)",
                "description": "Soft delete a user (sets status to deleted and deleted_at timestamp). Only PLATFORM_ADMIN can perform this action. User cannot delete themselves",
                "operationId": "delete_user",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "User UUID",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    },
                    {
                        "name": "reason",
                        "in": "query",
                        "description": "Optional deletion reason",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Only platform administrators can delete users"
                    },
                    "404": {
                        "description": "User not found"
                    },
                    "422": {
                        "description": "Cannot delete self"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/{id}/status": {
            "put": {
                "tags": [
                    "Users"
                ],
                "summary": "Update user status",
                "description": "Suspend or activate a user. Only PLATFORM_ADMIN can perform this action",
                "operationId": "update_user_status",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "User UUID",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "status"
                                ],
                                "properties": {
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "active",
                                            "suspended"
                                        ]
                                    },
                                    "reason": {
                                        "description": "Required when status is suspended",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "User status updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "userId": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "status": {
                                                    "type": "string"
                                                },
                                                "updatedAt": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Only platform administrators can update user status"
                    },
                    "404": {
                        "description": "User not found"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        }
    },
    "tags": [
        {
            "name": "Authentication",
            "description": "Authentication"
        },
        {
            "name": "Email Verification",
            "description": "Email Verification"
        },
        {
            "name": "Health",
            "description": "Health"
        },
        {
            "name": "Onboarding",
            "description": "Onboarding"
        },
        {
            "name": "Password Reset",
            "description": "Password Reset"
        },
        {
            "name": "Sessions",
            "description": "Sessions"
        },
        {
            "name": "Companies",
            "description": "Companies"
        },
        {
            "name": "Company Followers",
            "description": "Company Followers"
        },
        {
            "name": "Company Requests - Admin",
            "description": "Company Requests - Admin"
        },
        {
            "name": "Company Requests",
            "description": "Company Requests"
        },
        {
            "name": "User Profile",
            "description": "User Profile"
        },
        {
            "name": "Roles",
            "description": "Roles"
        },
        {
            "name": "Users",
            "description": "Users"
        }
    ],
    "components": {
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "description": "JWT Bearer Token. Include in Authorization header: Bearer <token>",
                "scheme": "bearer",
                "bearerFormat": "JWT"
            }
        }
    }
}